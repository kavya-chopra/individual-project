/*! For license information please see functions.js.LICENSE.txt */
!function(){var e={26098:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{a(n.next(e))}catch(e){i(e)}}function u(e){try{a(n.throw(e))}catch(e){i(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,u)}a((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(a){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(s=0)),s;)try{if(r=1,n&&(o=2&u[0]?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return s.label++,{value:u[1],done:!1};case 5:s.label++,n=u[1],u=[0];continue;case 7:u=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){s=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){s.label=u[1];break}if(6===u[0]&&s.label<o[1]){s.label=o[1],o=u;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(u);break}o[2]&&s.ops.pop(),s.trys.pop();continue}u=t.call(e,s)}catch(e){u=[6,e],n=0}finally{r=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t._connect=t.connect=t.openPort=t.get=t.put=t.logMessage=t.increment=t.currentTime=t.clock=t.add=void 0;var i=r(61673),s=r(55376),u=r(91135),a=r(19294),f=r(73489),c=r(15653),l=new i.Storage,h=new a.Connections,p=null,d=null;function y(e,t){return e+t}function g(e){var t=setInterval((function(){var t=b();e.setResult(t)}),1e3);e.onCanceled=function(){clearInterval(t)}}function b(){return(new Date).toLocaleTimeString()}function m(e,t){var r=0,n=setInterval((function(){r+=e,t.setResult(r)}),1e3);t.onCanceled=function(){clearInterval(n)}}function w(e){return console.log(e),e}function v(e,t){return n(this,void 0,void 0,(function(){return o(this,(function(r){return l.put(e,t),h.sendToAll({request_type:"PUT_REQUEST",name:e,value:(0,f.serialize)(t)}),[2,"success"]}))}))}function _(e){return l.get(e)}function S(e,t){return void 0===t&&(t="localhost"),n(this,void 0,void 0,(function(){return o(this,(function(r){return null===d?(p=new u.ZendServer(e,t,l,h),d=e,p.listen(),[2,"Listening on {port}"]):[2,"Port already open on {serverPort}"]}))}))}function O(e,t){return void 0===e&&(e="localhost"),n(this,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return null===d?[2,"Must open port before connecting"]:[4,x(e,t)];case 1:return[2,r.sent().getHandle()]}}))}))}function x(e,t){return n(this,void 0,void 0,(function(){var r;return o(this,(function(n){switch(n.label){case 0:return[4,(r=new s.ZendClient(e,t,d,l)).connect()];case 1:return n.sent(),h.add(r.getHandle(),new c.Connection(e,r.getPid(),t,new Date,r)),[2,r]}}))}))}t.add=y,t.clock=g,t.currentTime=b,t.increment=m,t.logMessage=w,t.put=v,t.get=_,t.openPort=S,t.connect=O,t._connect=x,CustomFunctions.associate("ADD",y),CustomFunctions.associate("CLOCK",g),CustomFunctions.associate("INCREMENT",m),CustomFunctions.associate("LOG",w),CustomFunctions.associate("PUT",v),CustomFunctions.associate("GET",_),CustomFunctions.associate("OPEN_PORT",S),CustomFunctions.associate("CONNECT",O)},95974:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processRequest=void 0;var n=r(21614),o=r(15653);t.processRequest=function(e,t,r){if("HANDSHAKE_REQUEST"===e.request_type){var i=(0,n.v4)();return r.add(i,new o.Connection(e.host,e.pid,e.local_port,new Date,null)),{response_type:"HANDSHAKE_RESPONSE",connection_handle:i}}return"PUT_REQUEST"===e.request_type?(t.putSerialized(e.name,e.value),{response_type:"PUT_RESPONSE",result:"success"}):"SYNC_STORAGE_REQUEST"===e.request_type?(t.putAllSerialized(e.storage),{response_type:"SYNC_STORAGE_RESPONSE",storage_snapshot:t.getAllSerialized()}):void console.error(new Error("unexpected request type"))}},55376:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{a(n.next(e))}catch(e){i(e)}}function u(e){try{a(n.throw(e))}catch(e){i(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,u)}a((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(a){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(s=0)),s;)try{if(r=1,n&&(o=2&u[0]?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return s.label++,{value:u[1],done:!1};case 5:s.label++,n=u[1],u=[0];continue;case 7:u=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){s=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){s.label=u[1];break}if(6===u[0]&&s.label<o[1]){s.label=o[1],o=u;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(u);break}o[2]&&s.ops.pop(),s.trys.pop();continue}u=t.call(e,s)}catch(e){u=[6,e],n=0}finally{r=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ZendClient=void 0;var s=r(64029),u=r(91291),a=i(r(20196)),f=i(r(20462)),c=r(85460),l=function(){function e(e,t,r,n){this.host=e,this.port=t,this.localPort=r,this.storage=n,this.socket=new a.default}return e.prototype.sendRequest=function(e){return n(this,void 0,void 0,(function(){var t,r,n,i,a,f,l;return o(this,(function(o){switch(o.label){case 0:return[4,this.socket.connect({port:this.port,host:this.host})];case 1:return o.sent(),t=s.BSON.serialize(e),r=Buffer.from((0,c.toBytesInt32)(t.length)),[4,this.socket.write(r)];case 2:return o.sent(),n=Buffer.from(t),[4,this.socket.write(n)];case 3:return o.sent(),console.log("Sent request: ",t),a=c.fromBytesInt32,[4,this.socket.read(4)];case 4:return i=a.apply(void 0,[o.sent()]),[4,this.socket.read(i)];case 5:return f=o.sent(),l=s.BSON.deserialize(f),[4,this.socket.end()];case 6:return o.sent(),(0,u.is)(l)?(console.log("Received response: ",l),[2,l]):(console.error("received invalid response"),[2])}}))}))},e.prototype.connect=function(){return n(this,void 0,void 0,(function(){var e,t,r,n;return o(this,(function(o){switch(o.label){case 0:return this.pid=process.pid,e={request_type:"HANDSHAKE_REQUEST",host:f.default.hostname(),pid:this.pid,local_port:this.localPort},[4,this.sendRequest(e)];case 1:return t=o.sent(),this.handle=t.connection_handle,r={request_type:"SYNC_STORAGE_REQUEST",storage:this.storage.getAllSerialized()},[4,this.sendRequest(r)];case 2:return n=o.sent(),this.storage.putAllSerialized(n.storage_snapshot),[2]}}))}))},e.prototype.getHandle=function(){return this.handle},e.prototype.getHost=function(){return this.host},e.prototype.getPid=function(){return this.pid},e}();t.ZendClient=l},15653:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connection=void 0;var r=function(){function e(e,t,r,n,o){this.host=e,this.pid=t,this.localPort=r,this.date=n,this.client=o}return e.prototype.getClient=function(){return this.client},e.prototype.setClient=function(e){this.client=e},e.prototype.getHost=function(){return this.host},e.prototype.getLocalPort=function(){return this.localPort},e}();t.Connection=r},19294:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{a(n.next(e))}catch(e){i(e)}}function u(e){try{a(n.throw(e))}catch(e){i(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,u)}a((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(a){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(s=0)),s;)try{if(r=1,n&&(o=2&u[0]?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return s.label++,{value:u[1],done:!1};case 5:s.label++,n=u[1],u=[0];continue;case 7:u=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){s=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){s.label=u[1];break}if(6===u[0]&&s.label<o[1]){s.label=o[1],o=u;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(u);break}o[2]&&s.ops.pop(),s.trys.pop();continue}u=t.call(e,s)}catch(e){u=[6,e],n=0}finally{r=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Connections=void 0;var i=r(26098),s=function(){function e(){this.connections=new Map}return e.prototype.add=function(e,t){this.connections.set(e,t)},e.prototype.sendToAll=function(e){return n(this,void 0,void 0,(function(){var t,r=this;return o(this,(function(s){switch(s.label){case 0:return t=function(t){var s=t[1];return n(r,void 0,void 0,(function(){var t,r;return o(this,(function(n){switch(n.label){case 0:return null!==s.getClient()?[3,2]:(r=(t=s).setClient,[4,(0,i._connect)(s.getHost(),s.getLocalPort())]);case 1:r.apply(t,[n.sent()]),n.label=2;case 2:return[4,s.getClient().sendRequest(e)];case 3:return n.sent(),[2]}}))}))},[4,Promise.all(Array.from(this.connections).map(t))];case 1:return s.sent(),[2]}}))}))},e}();t.Connections=s},73489:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deserialize=t.serialize=void 0;var n=r(91291);t.serialize=function e(t){if((0,n.is)(t))return{value_type:"float",value:t};if((0,n.is)(t))return{value_type:"string",value:t};if((0,n.is)(t)){var r={};return t.forEach((function(t,n){r[n]=e(t)})),{value_type:"dict",value:r}}if((0,n.is)(t)){var o=[];return t.forEach((function(t){o.push(e(t))})),{value_type:"list",value:o}}console.error("Cannot serialize unsupported type")},t.deserialize=function e(t){return"list"===t.value_type||"tuple"===t.value_type||"array"===t.value_type?t.value.map((function(t){e(t)})):"dict"===t.value_type?Object.entries(t.value).map((function(t){t[1]=e(t[1])})):t.value}},91135:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{a(n.next(e))}catch(e){i(e)}}function u(e){try{a(n.throw(e))}catch(e){i(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,u)}a((n=n.apply(e,t||[])).next())}))},u=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(a){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(s=0)),s;)try{if(r=1,n&&(o=2&u[0]?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return s.label++,{value:u[1],done:!1};case 5:s.label++,n=u[1],u=[0];continue;case 7:u=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){s=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){s.label=u[1];break}if(6===u[0]&&s.label<o[1]){s.label=o[1],o=u;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(u);break}o[2]&&s.ops.pop(),s.trys.pop();continue}u=t.call(e,s)}catch(e){u=[6,e],n=0}finally{r=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ZendServer=void 0;var a=i(r(85456)),f=r(64029),c=r(95974),l=r(91291),h=r(85460),p=function(){function e(e,t,r,n){void 0===t&&(t="localhost"),this.port=e,this.host=t,this.storage=r,this.connections=n}return e.prototype.listen=function(){return s(this,void 0,void 0,(function(){var e=this;return u(this,(function(t){return a.createServer((function(t){console.log("Server accepted client.");var r=null,n=function(e){r=e.readInt32BE(0),t.removeListener("data",n),t.on("data",o)},o=function(i){if(null!==r&&i.length===r){var s=f.BSON.deserialize(i);if((0,l.is)(s)){console.log("Received request: ",s);var u=(0,c.processRequest)(s,e.storage,e.connections),a=f.BSON.serialize(u),p=Buffer.from((0,h.toBytesInt32)(a.length));t.write(p);var d=Buffer.from(a);t.write(Buffer.from(d)),console.log("Sent response: ",a)}else console.error("Invalid request received")}else console.log("Invalid size received");t.removeListener("data",o),t.on("data",n)};t.on("data",n)})).listen(this.port,this.host),[2]}))}))},e}();t.ZendServer=p},61673:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Storage=void 0;var n=r(73489),o=function(){function e(){this.dict=new Map}return e.prototype.put=function(e,t){this.dict.set(e,(0,n.serialize)(t))},e.prototype.putSerialized=function(e,t){this.dict.set(e,t)},e.prototype.putAll=function(e){var t=this;e.forEach((function(e,r){t.dict.set(r,(0,n.serialize)(e))}))},e.prototype.putAllSerialized=function(e){for(var t=0,r=Object.entries(e);t<r.length;t++){var n=r[t],o=n[0],i=n[1];this.dict.set(o,i)}},e.prototype.get=function(e){return(0,n.deserialize)(this.dict.get(e))},e.prototype.getAll=function(){var e=new Map;return this.dict.forEach((function(t,r){e.set(r,(0,n.deserialize)(t))})),e},e.prototype.getAllSerialized=function(){var e=new Map;return this.dict.forEach((function(t,r){e.set(r,t)})),Object.fromEntries(e.entries())},e}();t.Storage=o},85460:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromBytesInt32=t.toBytesInt32=void 0,t.toBytesInt32=function(e){var t=new ArrayBuffer(4);return new DataView(t).setInt32(0,e,!1),Buffer.from(new Uint8Array(t))},t.fromBytesInt32=function(e){return e.readInt32BE(0)}},19662:function(e,t,r){var n=r(60614),o=r(66330),i=TypeError;e.exports=function(e){if(n(e))return e;throw i(o(e)+" is not a function")}},19670:function(e,t,r){var n=r(70111),o=String,i=TypeError;e.exports=function(e){if(n(e))return e;throw i(o(e)+" is not an object")}},13072:function(e,t,r){var n=r(17854),o=Object.defineProperty;e.exports=function(e,t){try{o(n,e,{value:t,configurable:!0,writable:!0})}catch(r){n[e]=t}return t}},19781:function(e,t,r){var n=r(47293);e.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4154:function(e){var t="object"==typeof document&&document.all,r=void 0===t&&void 0!==t;e.exports={all:t,IS_HTMLDDA:r}},80317:function(e,t,r){var n=r(17854),o=r(70111),i=n.document,s=o(i)&&o(i.createElement);e.exports=function(e){return s?i.createElement(e):{}}},88113:function(e){e.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},7392:function(e,t,r){var n,o,i=r(17854),s=r(88113),u=i.process,a=i.Deno,f=u&&u.versions||a&&a.version,c=f&&f.v8;c&&(o=(n=c.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!o&&s&&(!(n=s.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=s.match(/Chrome\/(\d+)/))&&(o=+n[1]),e.exports=o},47293:function(e){e.exports=function(e){try{return!!e()}catch(e){return!0}}},34374:function(e,t,r){var n=r(47293);e.exports=!n((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},46916:function(e,t,r){var n=r(34374),o=Function.prototype.call;e.exports=n?o.bind(o):function(){return o.apply(o,arguments)}},1702:function(e,t,r){var n=r(34374),o=Function.prototype,i=o.call,s=n&&o.bind.bind(i,i);e.exports=n?s:function(e){return function(){return i.apply(e,arguments)}}},35005:function(e,t,r){var n=r(17854),o=r(60614);e.exports=function(e,t){return arguments.length<2?(r=n[e],o(r)?r:void 0):n[e]&&n[e][t];var r}},58173:function(e,t,r){var n=r(19662),o=r(68554);e.exports=function(e,t){var r=e[t];return o(r)?void 0:n(r)}},17854:function(e,t,r){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||function(){return this}()||this||Function("return this")()},92597:function(e,t,r){var n=r(1702),o=r(47908),i=n({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return i(o(e),t)}},64664:function(e,t,r){var n=r(19781),o=r(47293),i=r(80317);e.exports=!n&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},60614:function(e,t,r){var n=r(4154),o=n.all;e.exports=n.IS_HTMLDDA?function(e){return"function"==typeof e||e===o}:function(e){return"function"==typeof e}},68554:function(e){e.exports=function(e){return null==e}},70111:function(e,t,r){var n=r(60614),o=r(4154),i=o.all;e.exports=o.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:n(e)||e===i}:function(e){return"object"==typeof e?null!==e:n(e)}},31913:function(e){e.exports=!1},52190:function(e,t,r){var n=r(35005),o=r(60614),i=r(47976),s=r(43307),u=Object;e.exports=s?function(e){return"symbol"==typeof e}:function(e){var t=n("Symbol");return o(t)&&i(t.prototype,u(e))}},3070:function(e,t,r){var n=r(19781),o=r(64664),i=r(3353),s=r(19670),u=r(34948),a=TypeError,f=Object.defineProperty,c=Object.getOwnPropertyDescriptor,l="enumerable",h="configurable",p="writable";t.f=n?i?function(e,t,r){if(s(e),t=u(t),s(r),"function"==typeof e&&"prototype"===t&&"value"in r&&p in r&&!r[p]){var n=c(e,t);n&&n[p]&&(e[t]=r.value,r={configurable:h in r?r[h]:n[h],enumerable:l in r?r[l]:n[l],writable:!1})}return f(e,t,r)}:f:function(e,t,r){if(s(e),t=u(t),s(r),o)try{return f(e,t,r)}catch(e){}if("get"in r||"set"in r)throw a("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},47976:function(e,t,r){var n=r(1702);e.exports=n({}.isPrototypeOf)},92140:function(e,t,r){var n=r(46916),o=r(60614),i=r(70111),s=TypeError;e.exports=function(e,t){var r,u;if("string"===t&&o(r=e.toString)&&!i(u=n(r,e)))return u;if(o(r=e.valueOf)&&!i(u=n(r,e)))return u;if("string"!==t&&o(r=e.toString)&&!i(u=n(r,e)))return u;throw s("Can't convert object to primitive value")}},40857:function(e,t,r){var n=r(17854);e.exports=n},84488:function(e,t,r){var n=r(68554),o=TypeError;e.exports=function(e){if(n(e))throw o("Can't call method on "+e);return e}},5465:function(e,t,r){var n=r(17854),o=r(13072),i="__core-js_shared__",s=n[i]||o(i,{});e.exports=s},72309:function(e,t,r){var n=r(31913),o=r(5465);(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.30.2",mode:n?"pure":"global",copyright:"Â© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.30.2/LICENSE",source:"https://github.com/zloirock/core-js"})},36293:function(e,t,r){var n=r(7392),o=r(47293),i=r(17854).String;e.exports=!!Object.getOwnPropertySymbols&&!o((function(){var e=Symbol();return!i(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},47908:function(e,t,r){var n=r(84488),o=Object;e.exports=function(e){return o(n(e))}},57593:function(e,t,r){var n=r(46916),o=r(70111),i=r(52190),s=r(58173),u=r(92140),a=r(5112),f=TypeError,c=a("toPrimitive");e.exports=function(e,t){if(!o(e)||i(e))return e;var r,a=s(e,c);if(a){if(void 0===t&&(t="default"),r=n(a,e,t),!o(r)||i(r))return r;throw f("Can't convert object to primitive value")}return void 0===t&&(t="number"),u(e,t)}},34948:function(e,t,r){var n=r(57593),o=r(52190);e.exports=function(e){var t=n(e,"string");return o(t)?t:t+""}},66330:function(e){var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},69711:function(e,t,r){var n=r(1702),o=0,i=Math.random(),s=n(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+s(++o+i,36)}},43307:function(e,t,r){var n=r(36293);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:function(e,t,r){var n=r(19781),o=r(47293);e.exports=n&&o((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},26800:function(e,t,r){var n=r(40857),o=r(92597),i=r(6061),s=r(3070).f;e.exports=function(e){var t=n.Symbol||(n.Symbol={});o(t,e)||s(t,e,{value:i.f(e)})}},6061:function(e,t,r){var n=r(5112);t.f=n},5112:function(e,t,r){var n=r(17854),o=r(72309),i=r(92597),s=r(69711),u=r(36293),a=r(43307),f=n.Symbol,c=o("wks"),l=a?f.for||f:f&&f.withoutSetter||s;e.exports=function(e){return i(c,e)||(c[e]=u&&i(f,e)?f[e]:l("Symbol."+e)),c[e]}},72443:function(e,t,r){r(26800)("asyncIterator")},85456:function(e,t,r){var n=r(85456);for(k in n)r.g[k]=n[k]},98728:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseDuplex=void 0,r(72443);const n=r(58556),o=r(32253);class i extends n.PromiseReadable{constructor(e){super(e),this.stream=e,this.isPromiseReadable=!0,this.isPromiseWritable=!0,this.readable=new n.PromiseReadable(e),this.writable=new o.PromiseWritable(e)}read(e){return this.readable.read(e)}readAll(){return this.readable.readAll()}setEncoding(e){return this.readable.setEncoding(e),this}iterate(e){return this.readable.iterate(e)}[Symbol.asyncIterator](){return this.readable[Symbol.asyncIterator]()}write(e,t){return this.writable.write(e,t)}writeAll(e,t){return this.writable.writeAll(e,t)}end(){return this.writable.end()}once(e){const t=this.stream;return new Promise(((r,n)=>{if(this.readable._errored){const e=this.readable._errored;return this.readable._errored=void 0,n(e)}if(this.writable._errored){const e=this.writable._errored;return this.writable._errored=void 0,n(e)}if(t.closed)return"close"===e?r():n(new Error(`once ${e} after close`));if(t.destroyed)return"close"===e||"end"===e||"finish"===e?r():n(new Error(`once ${e} after destroy`));const o="end"!==e&&"finish"!==e&&"error"!==e?e=>{f(),r(e)}:void 0,i=()=>{f(),r()},s="close"!==e?()=>{f(),r()}:void 0,u=e=>{this.readable._errored=void 0,this.writable._errored=void 0,f(),n(e)},a="close"!==e?()=>{f(),r()}:void 0,f=()=>{o&&t.removeListener(e,o),t.removeListener("close",i),s&&t.removeListener("end",s),t.removeListener("error",u),a&&t.removeListener("finish",a)};o&&t.on(e,o),t.on("close",i),s&&t.on("end",s),a&&t.on("finish",a),t.on("error",u)}))}destroy(){this.readable&&this.readable.destroy(),this.writable&&this.writable.destroy()}}t.PromiseDuplex=i,t.default=i},58556:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseReadable=void 0,r(72443);class n{constructor(e){this.stream=e,this._isPromiseReadable=!0,this.errorHandler=e=>{this._errored=e},e.on("error",this.errorHandler)}static[Symbol.hasInstance](e){return e._isPromiseReadable}read(e){const t=this.stream;return new Promise(((r,n)=>{if(this._errored){const e=this._errored;return this._errored=void 0,n(e)}if(!t.readable||t.closed||t.destroyed)return r();const o=()=>{const n=t.read(e);null!==n&&(a(),r(n))},i=()=>{a(),r()},s=()=>{a(),r()},u=e=>{this._errored=void 0,a(),n(e)},a=()=>{t.removeListener("close",i),t.removeListener("error",u),t.removeListener("end",s),t.removeListener("readable",o)};t.on("close",i),t.on("end",s),t.on("error",u),t.on("readable",o),o()}))}readAll(){const e=this.stream,t=[];let r="";return new Promise(((n,o)=>{if(this._errored){const e=this._errored;return this._errored=void 0,o(e)}if(!e.readable||e.closed||e.destroyed)return n();const i=e=>{"string"==typeof e?r+=e:t.push(e)},s=()=>{f(),n()},u=()=>{f(),t.length?n(Buffer.concat(t)):n(r)},a=e=>{this._errored=void 0,f(),o(e)},f=()=>{e.removeListener("close",s),e.removeListener("data",i),e.removeListener("error",a),e.removeListener("end",u)};e.on("close",s),e.on("data",i),e.on("end",u),e.on("error",a),e.resume()}))}setEncoding(e){return this.stream.setEncoding(e),this}once(e){const t=this.stream;return new Promise(((r,n)=>{if(this._errored){const e=this._errored;return this._errored=void 0,n(e)}if(t.closed)return"close"===e?r():n(new Error(`once ${e} after close`));if(t.destroyed)return"close"===e||"end"===e?r():n(new Error(`once ${e} after destroy`));const o="close"!==e&&"end"!==e&&"error"!==e?e=>{u(),r(e)}:void 0,i="close"!==e?()=>{u(),r()}:void 0,s=e=>{this._errored=void 0,u(),n(e)},u=()=>{o&&t.removeListener(e,o),t.removeListener("error",s),i&&t.removeListener("end",i),t.removeListener("error",s)};o&&t.on(e,o),t.on("close",(()=>{u(),r()})),i&&t.on("end",i),t.on("error",s)}))}iterate(e){const t=this;let r=!1;return{[Symbol.asyncIterator](){return this},async next(){if(r)return{value:"",done:!0};{const n=await t.read(e);return void 0===n?(r=!0,{value:"",done:!0}):{value:n,done:!1}}}}}[Symbol.asyncIterator](){return this.iterate()}destroy(){this.stream&&(this.stream.removeListener("error",this.errorHandler),"function"==typeof this.stream.destroy&&this.stream.destroy())}}t.PromiseReadable=n,t.default=n},20196:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseSocket=void 0;const n=r(70655).__importStar(r(85456)),o=r(98728),i=r(12104);var s=r(12104);Object.defineProperty(t,"TimeoutError",{enumerable:!0,get:function(){return s.TimeoutError}});class u extends o.PromiseDuplex{constructor(e=new n.Socket){super(e),this.socket=e}connect(e,t){const r=this.stream;return new Promise(((n,o)=>{if(this.readable._errored){const e=this.readable._errored;this.readable._errored=void 0,o(e)}if(this.writable._errored){const e=this.writable._errored;this.writable._errored=void 0,o(e)}const i=()=>{r.removeListener("error",s),n()},s=e=>{this.readable._errored=void 0,this.writable._errored=void 0,r.removeListener("connect",i),o(e)};r.once("error",s),void 0!==t?r.connect(e,t,i):r.connect(e,i)}))}setTimeout(e){const t=this.stream;0===e?this.timeoutHandler&&(t.removeListener("timeout",this.timeoutHandler),this.timeoutHandler=void 0):this.timeoutHandler||(this.timeoutHandler=()=>{this.timeoutHandler=void 0,t.destroy(new i.TimeoutError)},t.once("timeout",this.timeoutHandler)),t.setTimeout(e)}}t.PromiseSocket=u,t.default=u},12104:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TimeoutError=void 0;class r extends Error{constructor(){super("Timeout")}}t.TimeoutError=r},32253:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseWritable=void 0;class r{constructor(e){this.stream=e,this._isPromiseWritable=!0,this.errorHandler=e=>{this._errored=e},e.on("error",this.errorHandler)}static[Symbol.hasInstance](e){return e._isPromiseWritable}write(e,t){const r=this.stream;let n=!1;return new Promise(((o,i)=>{if(this._errored){const e=this._errored;return this._errored=void 0,i(e)}if(!r.writable||r.closed||r.destroyed)return i(new Error("write after end"));const s=e=>{this._errored=void 0,n=!0,i(e)};r.once("error",s);const u="string"==typeof e?r.write(e,t):r.write(e);if(r.removeListener("error",s),u)n||o(e.length);else{const t=e=>{this._errored=void 0,a(),i(e)},n=()=>{a(),o(e.length)},s=()=>{a(),o(e.length)},u=()=>{a(),o(e.length)},a=()=>{r.removeListener("close",s),r.removeListener("drain",n),r.removeListener("error",t),r.removeListener("finish",u)};r.on("close",s),r.on("drain",n),r.on("error",t),r.on("finish",u)}}))}writeAll(e,t=65536){const r=this.stream;return new Promise(((n,o)=>{if(this._errored){const e=this._errored;return this._errored=void 0,o(e)}if(!r.writable||r.closed||r.destroyed)return o(new Error("writeAll after end"));let i=0;const s=()=>{c(),n(r.bytesWritten||0)},u=()=>{for("function"==typeof r.cork&&r.cork();r.writable&&!this._errored&&i*t<e.length;){const s=e.slice(i*t,++i*t);if(i*t>=e.length){r.write(s,(e=>{e?o(e):n(r.bytesWritten)}));break}if(!r.write(s))break}"function"==typeof r.uncork&&r.uncork()},a=e=>{this._errored=void 0,c(),o(e)},f=()=>{c(),n(r.bytesWritten||0)},c=()=>{r.removeListener("close",s),r.removeListener("drain",u),r.removeListener("error",a),r.removeListener("finish",f)};r.on("drain",u),r.on("close",s),r.on("finish",f),r.on("error",a),u()}))}once(e){const t=this.stream;return new Promise(((r,n)=>{if(this._errored){const e=this._errored;return this._errored=void 0,n(e)}if(this._errored)return n(this._errored);if(t.closed)return"close"===e?r():n(new Error(`once ${e} after close`));if(t.destroyed)return"close"===e||"finish"===e?r():n(new Error(`once ${e} after destroy`));const o=()=>{a(),r()},i="close"!==e&&"finish"!==e&&"error"!==e?e=>{a(),r(e)}:void 0,s=e=>{this._errored=void 0,a(),n(e)},u="close"!==e?()=>{a(),r()}:void 0,a=()=>{i&&t.once(e,i),t.removeListener("close",o),t.removeListener("error",s),u&&t.removeListener("finish",u)};i&&t.on(e,i),t.on("close",o),t.on("error",s),u&&t.on("finish",u)}))}end(){const e=this.stream;return new Promise(((t,r)=>{if(this._errored){const e=this._errored;return this._errored=void 0,r(e)}if(!e.writable||e.closed||e.destroyed)return t();const n=()=>{i(),t()},o=e=>{this._errored=void 0,i(),r(e)},i=()=>{e.removeListener("error",o),e.removeListener("finish",n)};e.on("finish",n),e.on("error",o),e.end()}))}destroy(){this.stream&&(this.stream.removeListener("error",this.errorHandler),"function"==typeof this.stream.destroy&&this.stream.destroy())}}t.PromiseWritable=r,t.default=r},28660:function(e,t,r){var n;!function(e){!function(t){var n="object"==typeof r.g?r.g:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),o=i(e);function i(e,t){return function(r,n){"function"!=typeof e[r]&&Object.defineProperty(e,r,{configurable:!0,writable:!0,value:n}),t&&t(r,n)}}void 0===n.Reflect?n.Reflect=e:o=i(n.Reflect,o),function(e){var t=Object.prototype.hasOwnProperty,r="function"==typeof Symbol,n=r&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",o=r&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",i="function"==typeof Object.create,s={__proto__:[]}instanceof Array,u=!i&&!s,a={create:i?function(){return P(Object.create(null))}:s?function(){return P({__proto__:null})}:function(){return P({})},has:u?function(e,r){return t.call(e,r)}:function(e,t){return t in e},get:u?function(e,r){return t.call(e,r)?e[r]:void 0}:function(e,t){return e[t]}},f=Object.getPrototypeOf(Function),c="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,l=c||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var e={},t=[],r=function(){function e(e,t,r){this._index=0,this._keys=e,this._values=t,this._selector=r}return e.prototype["@@iterator"]=function(){return this},e.prototype[o]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var r=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:r,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var r=this._find(e,!0);return this._values[r]=t,this},t.prototype.delete=function(t){var r=this._find(t,!1);if(r>=0){for(var n=this._keys.length,o=r+1;o<n;o++)this._keys[o-1]=this._keys[o],this._values[o-1]=this._values[o];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new r(this._keys,this._values,n)},t.prototype.values=function(){return new r(this._keys,this._values,i)},t.prototype.entries=function(){return new r(this._keys,this._values,s)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[o]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function n(e,t){return e}function i(e,t){return t}function s(e,t){return[e,t]}}():Map,h=c||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function e(){this._map=new l}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[o]=function(){return this.keys()},e}():Set,p=new(c||"function"!=typeof WeakMap?function(){var e=16,r=a.create(),n=o();return function(){function e(){this._key=o()}return e.prototype.has=function(e){var t=i(e,!1);return void 0!==t&&a.has(t,this._key)},e.prototype.get=function(e){var t=i(e,!1);return void 0!==t?a.get(t,this._key):void 0},e.prototype.set=function(e,t){return i(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=i(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=o()},e}();function o(){var e;do{e="@@WeakMap@@"+u()}while(a.has(r,e));return r[e]=!0,e}function i(e,r){if(!t.call(e,n)){if(!r)return;Object.defineProperty(e,n,{value:a.create()})}return e[n]}function s(e,t){for(var r=0;r<t;++r)e[r]=255*Math.random()|0;return e}function u(){var t,r=(t=e,"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):s(new Uint8Array(t),t):s(new Array(t),t));r[6]=79&r[6]|64,r[8]=191&r[8]|128;for(var n="",o=0;o<e;++o){var i=r[o];4!==o&&6!==o&&8!==o||(n+="-"),i<16&&(n+="0"),n+=i.toString(16).toLowerCase()}return n}}():WeakMap);function d(e,t,r){var n=p.get(e);if(O(n)){if(!r)return;n=new l,p.set(e,n)}var o=n.get(t);if(O(o)){if(!r)return;o=new l,n.set(t,o)}return o}function y(e,t,r){if(g(e,t,r))return!0;var n=L(t);return!x(n)&&y(e,n,r)}function g(e,t,r){var n=d(t,r,!1);return!O(n)&&!!n.has(e)}function b(e,t,r){if(g(e,t,r))return m(e,t,r);var n=L(t);return x(n)?void 0:b(e,n,r)}function m(e,t,r){var n=d(t,r,!1);if(!O(n))return n.get(e)}function w(e,t,r,n){d(r,n,!0).set(e,t)}function v(e,t){var r=_(e,t),n=L(e);if(null===n)return r;var o=v(n,t);if(o.length<=0)return r;if(r.length<=0)return o;for(var i=new h,s=[],u=0,a=r;u<a.length;u++){var f=a[u];i.has(f)||(i.add(f),s.push(f))}for(var c=0,l=o;c<l.length;c++)f=l[c],i.has(f)||(i.add(f),s.push(f));return s}function _(e,t){var r=[],n=d(e,t,!1);if(O(n))return r;for(var i=function(e){var t=U(e,o);if(!T(t))throw new TypeError;var r=t.call(e);if(!B(r))throw new TypeError;return r}(n.keys()),s=0;;){var u=$(i);if(!u)return r.length=s,r;var a=u.value;try{r[s]=a}catch(e){try{A(i)}finally{throw e}}s++}}function S(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function O(e){return void 0===e}function x(e){return null===e}function B(e){return"object"==typeof e?null!==e:"function"==typeof e}function E(e,t){switch(S(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var r=3===t?"string":5===t?"number":"default",o=U(e,n);if(void 0!==o){var i=o.call(e,r);if(B(i))throw new TypeError;return i}return function(e,t){if("string"===t){var r=e.toString;if(T(r)&&!B(o=r.call(e)))return o;if(T(n=e.valueOf)&&!B(o=n.call(e)))return o}else{var n;if(T(n=e.valueOf)&&!B(o=n.call(e)))return o;var o,i=e.toString;if(T(i)&&!B(o=i.call(e)))return o}throw new TypeError}(e,"default"===r?"number":r)}function N(e){var t=E(e,3);return"symbol"==typeof t?t:function(e){return""+e}(t)}function j(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function T(e){return"function"==typeof e}function I(e){return"function"==typeof e}function U(e,t){var r=e[t];if(null!=r){if(!T(r))throw new TypeError;return r}}function $(e){var t=e.next();return!t.done&&t}function A(e){var t=e.return;t&&t.call(e)}function L(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===f)return t;if(t!==f)return t;var r=e.prototype,n=r&&Object.getPrototypeOf(r);if(null==n||n===Object.prototype)return t;var o=n.constructor;return"function"!=typeof o||o===e?t:o}function P(e){return e.__=void 0,delete e.__,e}e("decorate",(function(e,t,r,n){if(O(r)){if(!j(e))throw new TypeError;if(!I(t))throw new TypeError;return function(e,t){for(var r=e.length-1;r>=0;--r){var n=(0,e[r])(t);if(!O(n)&&!x(n)){if(!I(n))throw new TypeError;t=n}}return t}(e,t)}if(!j(e))throw new TypeError;if(!B(t))throw new TypeError;if(!B(n)&&!O(n)&&!x(n))throw new TypeError;return x(n)&&(n=void 0),function(e,t,r,n){for(var o=e.length-1;o>=0;--o){var i=(0,e[o])(t,r,n);if(!O(i)&&!x(i)){if(!B(i))throw new TypeError;n=i}}return n}(e,t,r=N(r),n)})),e("metadata",(function(e,t){return function(r,n){if(!B(r))throw new TypeError;if(!O(n)&&!function(e){switch(S(e)){case 3:case 4:return!0;default:return!1}}(n))throw new TypeError;w(e,t,r,n)}})),e("defineMetadata",(function(e,t,r,n){if(!B(r))throw new TypeError;return O(n)||(n=N(n)),w(e,t,r,n)})),e("hasMetadata",(function(e,t,r){if(!B(t))throw new TypeError;return O(r)||(r=N(r)),y(e,t,r)})),e("hasOwnMetadata",(function(e,t,r){if(!B(t))throw new TypeError;return O(r)||(r=N(r)),g(e,t,r)})),e("getMetadata",(function(e,t,r){if(!B(t))throw new TypeError;return O(r)||(r=N(r)),b(e,t,r)})),e("getOwnMetadata",(function(e,t,r){if(!B(t))throw new TypeError;return O(r)||(r=N(r)),m(e,t,r)})),e("getMetadataKeys",(function(e,t){if(!B(e))throw new TypeError;return O(t)||(t=N(t)),v(e,t)})),e("getOwnMetadataKeys",(function(e,t){if(!B(e))throw new TypeError;return O(t)||(t=N(t)),_(e,t)})),e("deleteMetadata",(function(e,t,r){if(!B(t))throw new TypeError;O(r)||(r=N(r));var n=d(t,r,!1);if(O(n))return!1;if(!n.delete(e))return!1;if(n.size>0)return!0;var o=p.get(t);return o.delete(r),o.size>0||p.delete(t),!0}))}(o)}()}(n||(n={}))},70655:function(e,t,r){"use strict";r.r(t),r.d(t,{__assign:function(){return i},__asyncDelegator:function(){return B},__asyncGenerator:function(){return x},__asyncValues:function(){return E},__await:function(){return O},__awaiter:function(){return d},__classPrivateFieldGet:function(){return U},__classPrivateFieldIn:function(){return A},__classPrivateFieldSet:function(){return $},__createBinding:function(){return g},__decorate:function(){return u},__esDecorate:function(){return f},__exportStar:function(){return b},__extends:function(){return o},__generator:function(){return y},__importDefault:function(){return I},__importStar:function(){return T},__makeTemplateObject:function(){return N},__metadata:function(){return p},__param:function(){return a},__propKey:function(){return l},__read:function(){return w},__rest:function(){return s},__runInitializers:function(){return c},__setFunctionName:function(){return h},__spread:function(){return v},__spreadArray:function(){return S},__spreadArrays:function(){return _},__values:function(){return m}});var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)};function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var i=function(){return i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)};function s(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}function u(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s}function a(e,t){return function(r,n){t(r,n,e)}}function f(e,t,r,n,o,i){function s(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var u,a=n.kind,f="getter"===a?"get":"setter"===a?"set":"value",c=!t&&e?n.static?e:e.prototype:null,l=t||(c?Object.getOwnPropertyDescriptor(c,n.name):{}),h=!1,p=r.length-1;p>=0;p--){var d={};for(var y in n)d[y]="access"===y?{}:n[y];for(var y in n.access)d.access[y]=n.access[y];d.addInitializer=function(e){if(h)throw new TypeError("Cannot add initializers after decoration has completed");i.push(s(e||null))};var g=(0,r[p])("accessor"===a?{get:l.get,set:l.set}:l[f],d);if("accessor"===a){if(void 0===g)continue;if(null===g||"object"!=typeof g)throw new TypeError("Object expected");(u=s(g.get))&&(l.get=u),(u=s(g.set))&&(l.set=u),(u=s(g.init))&&o.unshift(u)}else(u=s(g))&&("field"===a?o.unshift(u):l[f]=u)}c&&Object.defineProperty(c,n.name,l),h=!0}function c(e,t,r){for(var n=arguments.length>2,o=0;o<t.length;o++)r=n?t[o].call(e,r):t[o].call(e);return n?r:void 0}function l(e){return"symbol"==typeof e?e:"".concat(e)}function h(e,t,r){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function p(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function d(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{a(n.next(e))}catch(e){i(e)}}function u(e){try{a(n.throw(e))}catch(e){i(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,u)}a((n=n.apply(e,t||[])).next())}))}function y(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(a){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(s=0)),s;)try{if(r=1,n&&(o=2&u[0]?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return s.label++,{value:u[1],done:!1};case 5:s.label++,n=u[1],u=[0];continue;case 7:u=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){s=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){s.label=u[1];break}if(6===u[0]&&s.label<o[1]){s.label=o[1],o=u;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(u);break}o[2]&&s.ops.pop(),s.trys.pop();continue}u=t.call(e,s)}catch(e){u=[6,e],n=0}finally{r=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}}var g=Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]};function b(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||g(t,e,r)}function m(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function w(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s}function v(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(w(arguments[t]));return e}function _(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var i=arguments[t],s=0,u=i.length;s<u;s++,o++)n[o]=i[s];return n}function S(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}function O(e){return this instanceof O?(this.v=e,this):new O(e)}function x(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(e,t||[]),i=[];return n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n;function s(e){o[e]&&(n[e]=function(t){return new Promise((function(r,n){i.push([e,t,r,n])>1||u(e,t)}))})}function u(e,t){try{(r=o[e](t)).value instanceof O?Promise.resolve(r.value.v).then(a,f):c(i[0][2],r)}catch(e){c(i[0][3],e)}var r}function a(e){u("next",e)}function f(e){u("throw",e)}function c(e,t){e(t),i.shift(),i.length&&u(i[0][0],i[0][1])}}function B(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,o){t[n]=e[n]?function(t){return(r=!r)?{value:O(e[n](t)),done:!1}:o?o(t):t}:o}}function E(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=m(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,o){!function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}(n,o,(t=e[r](t)).done,t.value)}))}}}function N(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var j=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function T(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&g(t,e,r);return j(t,e),t}function I(e){return e&&e.__esModule?e:{default:e}}function U(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function $(e,t,r,n,o){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(e,r):o?o.value=r:t.set(e,r),r}function A(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}t.default={__extends:o,__assign:i,__rest:s,__decorate:u,__param:a,__metadata:p,__awaiter:d,__generator:y,__createBinding:g,__exportStar:b,__values:m,__read:w,__spread:v,__spreadArrays:_,__spreadArray:S,__await:O,__asyncGenerator:x,__asyncDelegator:B,__asyncValues:E,__makeTemplateObject:N,__importStar:T,__importDefault:I,__classPrivateFieldGet:U,__classPrivateFieldSet:$,__classPrivateFieldIn:A}},91291:function(e,t,r){let n;function o(e){if("function"!=typeof e)throw new Error("This module should not be used in runtime. Instead, use a transformer during compilation.")}const i=Symbol("assertions");class s extends Error{constructor(e,t){super(function(e,t,n){if(void 0===e)return"validation error";const o=function(e,t){let r=t;for(const t of e.slice(1))r=r[t.startsWith("[")?parseInt(t.replace("[","").replace("]","")):t];return r}(t,n);try{return e+", found: "+r(89539).inspect(o)}catch(e){}try{return e+", found: "+JSON.stringify(o)}catch(e){}return e}(e.message,e.path,t)),this.name="TypeGuardError",this.path=e.path,this.reason=e.reason,this.input=t}}function u(e,t=n){return o(t),null===t(e)}function a(e,t=n){o(t);const r=t(e);if(null===r)return e;throw new s(r,e)}function f(e=n){return o(e),t=>u(t,e)}function c(e=n){return o(e),t=>a(t,e)}e.exports={is:u,assertType:a,createIs:f,createAssertType:c,equals:u,createEquals:f,assertEquals:a,createAssertEquals:c,AssertType:function(e,t={}){return r(28660),function(r,n,o){const s=Reflect.getOwnMetadata(i,r,n)||[];Reflect.getOwnMetadata("design:returntype",r,n)===Promise?s[o]={assertion:e,options:Object.assign({async:!0},t)}:s[o]={assertion:e,options:t},Reflect.defineMetadata(i,s,r,n)}},ValidateClass:function(e=s){return r(28660),function(t){for(const r of Object.getOwnPropertyNames(t.prototype)){const n=Reflect.getOwnMetadata(i,t.prototype,r);if(n){const o=t.prototype[r];t.prototype[r]=function(...t){for(let r=0;r<n.length;r++){if(!n[r])continue;const o=n[r].assertion(t[r]);if(null!==o){const i=new e(o,t[r]);if(n[r].options.async)return Promise.reject(i);throw i}}return o.apply(this,t)}}}}},TypeGuardError:s,setDefaultGetErrorObject:function(e){n=e}}},91496:function(e){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},20384:function(e){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},89539:function(e,t,r){var n=/%[sdj%]/g;t.format=function(e){if(!g(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(s(arguments[r]));return t.join(" ")}r=1;for(var o=arguments,i=o.length,u=String(e).replace(n,(function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(o[r++]);case"%d":return Number(o[r++]);case"%j":try{return JSON.stringify(o[r++])}catch(e){return"[Circular]"}default:return e}})),a=o[r];r<i;a=o[++r])d(a)||!w(a)?u+=" "+a:u+=" "+s(a);return u},t.deprecate=function(e,n){if(b(r.g.process))return function(){return t.deprecate(e,n).apply(this,arguments)};if(!0===process.noDeprecation)return e;var o=!1;return function(){if(!o){if(process.throwDeprecation)throw new Error(n);process.traceDeprecation?console.trace(n):console.error(n),o=!0}return e.apply(this,arguments)}};var o,i={};function s(e,r){var n={seen:[],stylize:a};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),p(r)?n.showHidden=r:r&&t._extend(n,r),b(n.showHidden)&&(n.showHidden=!1),b(n.depth)&&(n.depth=2),b(n.colors)&&(n.colors=!1),b(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=u),f(n,e,n.depth)}function u(e,t){var r=s.styles[t];return r?"["+s.colors[r][0]+"m"+e+"["+s.colors[r][1]+"m":e}function a(e,t){return e}function f(e,r,n){if(e.customInspect&&r&&S(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var o=r.inspect(n,e);return g(o)||(o=f(e,o,n)),o}var i=function(e,t){if(b(t))return e.stylize("undefined","undefined");if(g(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return y(t)?e.stylize(""+t,"number"):p(t)?e.stylize(""+t,"boolean"):d(t)?e.stylize("null","null"):void 0}(e,r);if(i)return i;var s=Object.keys(r),u=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(r)),_(r)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return c(r);if(0===s.length){if(S(r)){var a=r.name?": "+r.name:"";return e.stylize("[Function"+a+"]","special")}if(m(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(v(r))return e.stylize(Date.prototype.toString.call(r),"date");if(_(r))return c(r)}var w,O="",x=!1,B=["{","}"];return h(r)&&(x=!0,B=["[","]"]),S(r)&&(O=" [Function"+(r.name?": "+r.name:"")+"]"),m(r)&&(O=" "+RegExp.prototype.toString.call(r)),v(r)&&(O=" "+Date.prototype.toUTCString.call(r)),_(r)&&(O=" "+c(r)),0!==s.length||x&&0!=r.length?n<0?m(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),w=x?function(e,t,r,n,o){for(var i=[],s=0,u=t.length;s<u;++s)E(t,String(s))?i.push(l(e,t,r,n,String(s),!0)):i.push("");return o.forEach((function(o){o.match(/^\d+$/)||i.push(l(e,t,r,n,o,!0))})),i}(e,r,n,u,s):s.map((function(t){return l(e,r,n,u,t,x)})),e.seen.pop(),function(e,t,r){return e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}(w,O,B)):B[0]+O+B[1]}function c(e){return"["+Error.prototype.toString.call(e)+"]"}function l(e,t,r,n,o,i){var s,u,a;if((a=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?u=a.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):a.set&&(u=e.stylize("[Setter]","special")),E(n,o)||(s="["+o+"]"),u||(e.seen.indexOf(a.value)<0?(u=d(r)?f(e,a.value,null):f(e,a.value,r-1)).indexOf("\n")>-1&&(u=i?u.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+u.split("\n").map((function(e){return"   "+e})).join("\n")):u=e.stylize("[Circular]","special")),b(s)){if(i&&o.match(/^\d+$/))return u;(s=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+u}function h(e){return Array.isArray(e)}function p(e){return"boolean"==typeof e}function d(e){return null===e}function y(e){return"number"==typeof e}function g(e){return"string"==typeof e}function b(e){return void 0===e}function m(e){return w(e)&&"[object RegExp]"===O(e)}function w(e){return"object"==typeof e&&null!==e}function v(e){return w(e)&&"[object Date]"===O(e)}function _(e){return w(e)&&("[object Error]"===O(e)||e instanceof Error)}function S(e){return"function"==typeof e}function O(e){return Object.prototype.toString.call(e)}function x(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(b(o)&&(o=process.env.NODE_DEBUG||""),e=e.toUpperCase(),!i[e])if(new RegExp("\\b"+e+"\\b","i").test(o)){var r=process.pid;i[e]=function(){var n=t.format.apply(t,arguments);console.error("%s %d: %s",e,r,n)}}else i[e]=function(){};return i[e]},t.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=h,t.isBoolean=p,t.isNull=d,t.isNullOrUndefined=function(e){return null==e},t.isNumber=y,t.isString=g,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=b,t.isRegExp=m,t.isObject=w,t.isDate=v,t.isError=_,t.isFunction=S,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=r(20384);var B=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function E(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){var e,r;console.log("%s - %s",(r=[x((e=new Date).getHours()),x(e.getMinutes()),x(e.getSeconds())].join(":"),[e.getDate(),B[e.getMonth()],r].join(" ")),t.format.apply(t,arguments))},t.inherits=r(91496),t._extend=function(e,t){if(!t||!w(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}},21614:function(e,t,r){"use strict";var n;r.r(t),r.d(t,{NIL:function(){return I},parse:function(){return g},stringify:function(){return h},v1:function(){return y},v3:function(){return B},v4:function(){return E},v5:function(){return T},validate:function(){return u},version:function(){return U}});var o=new Uint8Array(16);function i(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(o)}for(var s=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,u=function(e){return"string"==typeof e&&s.test(e)},a=[],f=0;f<256;++f)a.push((f+256).toString(16).substr(1));var c,l,h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(a[e[t+0]]+a[e[t+1]]+a[e[t+2]]+a[e[t+3]]+"-"+a[e[t+4]]+a[e[t+5]]+"-"+a[e[t+6]]+a[e[t+7]]+"-"+a[e[t+8]]+a[e[t+9]]+"-"+a[e[t+10]]+a[e[t+11]]+a[e[t+12]]+a[e[t+13]]+a[e[t+14]]+a[e[t+15]]).toLowerCase();if(!u(r))throw TypeError("Stringified UUID is invalid");return r},p=0,d=0,y=function(e,t,r){var n=t&&r||0,o=t||new Array(16),s=(e=e||{}).node||c,u=void 0!==e.clockseq?e.clockseq:l;if(null==s||null==u){var a=e.random||(e.rng||i)();null==s&&(s=c=[1|a[0],a[1],a[2],a[3],a[4],a[5]]),null==u&&(u=l=16383&(a[6]<<8|a[7]))}var f=void 0!==e.msecs?e.msecs:Date.now(),y=void 0!==e.nsecs?e.nsecs:d+1,g=f-p+(y-d)/1e4;if(g<0&&void 0===e.clockseq&&(u=u+1&16383),(g<0||f>p)&&void 0===e.nsecs&&(y=0),y>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");p=f,d=y,l=u;var b=(1e4*(268435455&(f+=122192928e5))+y)%4294967296;o[n++]=b>>>24&255,o[n++]=b>>>16&255,o[n++]=b>>>8&255,o[n++]=255&b;var m=f/4294967296*1e4&268435455;o[n++]=m>>>8&255,o[n++]=255&m,o[n++]=m>>>24&15|16,o[n++]=m>>>16&255,o[n++]=u>>>8|128,o[n++]=255&u;for(var w=0;w<6;++w)o[n+w]=s[w];return t||h(o)},g=function(e){if(!u(e))throw TypeError("Invalid UUID");var t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};function b(e,t,r){function n(e,n,o,i){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=g(n)),16!==n.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var s=new Uint8Array(16+e.length);if(s.set(n),s.set(e,n.length),(s=r(s))[6]=15&s[6]|t,s[8]=63&s[8]|128,o){i=i||0;for(var u=0;u<16;++u)o[i+u]=s[u];return o}return h(s)}try{n.name=e}catch(e){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}function m(e){return 14+(e+64>>>9<<4)+1}function w(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function v(e,t,r,n,o,i){return w((s=w(w(t,e),w(n,i)))<<(u=o)|s>>>32-u,r);var s,u}function _(e,t,r,n,o,i,s){return v(t&r|~t&n,e,t,o,i,s)}function S(e,t,r,n,o,i,s){return v(t&n|r&~n,e,t,o,i,s)}function O(e,t,r,n,o,i,s){return v(t^r^n,e,t,o,i,s)}function x(e,t,r,n,o,i,s){return v(r^(t|~n),e,t,o,i,s)}var B=b("v3",48,(function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return function(e){for(var t=[],r=32*e.length,n="0123456789abcdef",o=0;o<r;o+=8){var i=e[o>>5]>>>o%32&255,s=parseInt(n.charAt(i>>>4&15)+n.charAt(15&i),16);t.push(s)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[m(t)-1]=t;for(var r=1732584193,n=-271733879,o=-1732584194,i=271733878,s=0;s<e.length;s+=16){var u=r,a=n,f=o,c=i;r=_(r,n,o,i,e[s],7,-680876936),i=_(i,r,n,o,e[s+1],12,-389564586),o=_(o,i,r,n,e[s+2],17,606105819),n=_(n,o,i,r,e[s+3],22,-1044525330),r=_(r,n,o,i,e[s+4],7,-176418897),i=_(i,r,n,o,e[s+5],12,1200080426),o=_(o,i,r,n,e[s+6],17,-1473231341),n=_(n,o,i,r,e[s+7],22,-45705983),r=_(r,n,o,i,e[s+8],7,1770035416),i=_(i,r,n,o,e[s+9],12,-1958414417),o=_(o,i,r,n,e[s+10],17,-42063),n=_(n,o,i,r,e[s+11],22,-1990404162),r=_(r,n,o,i,e[s+12],7,1804603682),i=_(i,r,n,o,e[s+13],12,-40341101),o=_(o,i,r,n,e[s+14],17,-1502002290),r=S(r,n=_(n,o,i,r,e[s+15],22,1236535329),o,i,e[s+1],5,-165796510),i=S(i,r,n,o,e[s+6],9,-1069501632),o=S(o,i,r,n,e[s+11],14,643717713),n=S(n,o,i,r,e[s],20,-373897302),r=S(r,n,o,i,e[s+5],5,-701558691),i=S(i,r,n,o,e[s+10],9,38016083),o=S(o,i,r,n,e[s+15],14,-660478335),n=S(n,o,i,r,e[s+4],20,-405537848),r=S(r,n,o,i,e[s+9],5,568446438),i=S(i,r,n,o,e[s+14],9,-1019803690),o=S(o,i,r,n,e[s+3],14,-187363961),n=S(n,o,i,r,e[s+8],20,1163531501),r=S(r,n,o,i,e[s+13],5,-1444681467),i=S(i,r,n,o,e[s+2],9,-51403784),o=S(o,i,r,n,e[s+7],14,1735328473),r=O(r,n=S(n,o,i,r,e[s+12],20,-1926607734),o,i,e[s+5],4,-378558),i=O(i,r,n,o,e[s+8],11,-2022574463),o=O(o,i,r,n,e[s+11],16,1839030562),n=O(n,o,i,r,e[s+14],23,-35309556),r=O(r,n,o,i,e[s+1],4,-1530992060),i=O(i,r,n,o,e[s+4],11,1272893353),o=O(o,i,r,n,e[s+7],16,-155497632),n=O(n,o,i,r,e[s+10],23,-1094730640),r=O(r,n,o,i,e[s+13],4,681279174),i=O(i,r,n,o,e[s],11,-358537222),o=O(o,i,r,n,e[s+3],16,-722521979),n=O(n,o,i,r,e[s+6],23,76029189),r=O(r,n,o,i,e[s+9],4,-640364487),i=O(i,r,n,o,e[s+12],11,-421815835),o=O(o,i,r,n,e[s+15],16,530742520),r=x(r,n=O(n,o,i,r,e[s+2],23,-995338651),o,i,e[s],6,-198630844),i=x(i,r,n,o,e[s+7],10,1126891415),o=x(o,i,r,n,e[s+14],15,-1416354905),n=x(n,o,i,r,e[s+5],21,-57434055),r=x(r,n,o,i,e[s+12],6,1700485571),i=x(i,r,n,o,e[s+3],10,-1894986606),o=x(o,i,r,n,e[s+10],15,-1051523),n=x(n,o,i,r,e[s+1],21,-2054922799),r=x(r,n,o,i,e[s+8],6,1873313359),i=x(i,r,n,o,e[s+15],10,-30611744),o=x(o,i,r,n,e[s+6],15,-1560198380),n=x(n,o,i,r,e[s+13],21,1309151649),r=x(r,n,o,i,e[s+4],6,-145523070),i=x(i,r,n,o,e[s+11],10,-1120210379),o=x(o,i,r,n,e[s+2],15,718787259),n=x(n,o,i,r,e[s+9],21,-343485551),r=w(r,u),n=w(n,a),o=w(o,f),i=w(i,c)}return[r,n,o,i]}(function(e){if(0===e.length)return[];for(var t=8*e.length,r=new Uint32Array(m(t)),n=0;n<t;n+=8)r[n>>5]|=(255&e[n/8])<<n%32;return r}(e),8*e.length))})),E=function(e,t,r){var n=(e=e||{}).random||(e.rng||i)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var o=0;o<16;++o)t[r+o]=n[o];return t}return h(n)};function N(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:case 3:return t^r^n;case 2:return t&r^t&n^r&n}}function j(e,t){return e<<t|e>>>32-t}var T=b("v5",80,(function(e){var t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var n=unescape(encodeURIComponent(e));e=[];for(var o=0;o<n.length;++o)e.push(n.charCodeAt(o))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var i=e.length/4+2,s=Math.ceil(i/16),u=new Array(s),a=0;a<s;++a){for(var f=new Uint32Array(16),c=0;c<16;++c)f[c]=e[64*a+4*c]<<24|e[64*a+4*c+1]<<16|e[64*a+4*c+2]<<8|e[64*a+4*c+3];u[a]=f}u[s-1][14]=8*(e.length-1)/Math.pow(2,32),u[s-1][14]=Math.floor(u[s-1][14]),u[s-1][15]=8*(e.length-1)&4294967295;for(var l=0;l<s;++l){for(var h=new Uint32Array(80),p=0;p<16;++p)h[p]=u[l][p];for(var d=16;d<80;++d)h[d]=j(h[d-3]^h[d-8]^h[d-14]^h[d-16],1);for(var y=r[0],g=r[1],b=r[2],m=r[3],w=r[4],v=0;v<80;++v){var _=Math.floor(v/20),S=j(y,5)+N(_,g,b,m)+w+t[_]+h[v]>>>0;w=m,m=b,b=j(g,30)>>>0,g=y,y=S}r[0]=r[0]+y>>>0,r[1]=r[1]+g>>>0,r[2]=r[2]+b>>>0,r[3]=r[3]+m>>>0,r[4]=r[4]+w>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]})),I="00000000-0000-0000-0000-000000000000",U=function(e){if(!u(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},74314:function(){},20462:function(){},64029:function(e,t,r){"use strict";function n(e){return["[object ArrayBuffer]","[object SharedArrayBuffer]"].includes(Object.prototype.toString.call(e))}function o(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)}function i(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function s(e){return"[object Map]"===Object.prototype.toString.call(e)}function u(e){return"[object Date]"===Object.prototype.toString.call(e)}const a=5,f=2147483647,c=-2147483648,l=Math.pow(2,63)-1,h=-Math.pow(2,63),p=Math.pow(2,53),d=-Math.pow(2,53),y=1,g=2,b=3,m=4,w=5,v=6,_=7,S=8,O=9,x=10,B=11,E=12,N=13,j=14,T=15,I=16,U=17,$=18,A=19,L=255,P=127,R=0,D=4,M=Object.freeze({double:1,string:2,object:3,array:4,binData:5,undefined:6,objectId:7,bool:8,date:9,null:10,regex:11,dbPointer:12,javascript:13,symbol:14,javascriptWithScope:15,int:16,timestamp:17,long:18,decimal:19,minKey:-1,maxKey:127});class k extends Error{get bsonError(){return!0}get name(){return"BSONError"}constructor(e){super(e)}static isBSONError(e){return null!=e&&"object"==typeof e&&"bsonError"in e&&!0===e.bsonError&&"name"in e&&"message"in e&&"stack"in e}}class F extends k{get name(){return"BSONVersionError"}constructor(){super(`Unsupported BSON version, bson types must be from bson ${a}.0 or later`)}}class z extends k{get name(){return"BSONRuntimeError"}constructor(e){super(e)}}function C(e){return H.fromNumberArray(Array.from({length:e},(()=>Math.floor(256*Math.random()))))}const H={toLocalBufferType(e){if(Buffer.isBuffer(e))return e;if(ArrayBuffer.isView(e))return Buffer.from(e.buffer,e.byteOffset,e.byteLength);const t=e?.[Symbol.toStringTag]??Object.prototype.toString.call(e);if("ArrayBuffer"===t||"SharedArrayBuffer"===t||"[object ArrayBuffer]"===t||"[object SharedArrayBuffer]"===t)return Buffer.from(e);throw new k(`Cannot create Buffer from ${String(e)}`)},allocate(e){return Buffer.alloc(e)},equals(e,t){return H.toLocalBufferType(e).equals(t)},fromNumberArray(e){return Buffer.from(e)},fromBase64(e){return Buffer.from(e,"base64")},toBase64(e){return H.toLocalBufferType(e).toString("base64")},fromISO88591(e){return Buffer.from(e,"binary")},toISO88591(e){return H.toLocalBufferType(e).toString("binary")},fromHex(e){return Buffer.from(e,"hex")},toHex(e){return H.toLocalBufferType(e).toString("hex")},fromUTF8(e){return Buffer.from(e,"utf8")},toUTF8(e){return H.toLocalBufferType(e).toString("utf8")},utf8ByteLength(e){return Buffer.byteLength(e,"utf8")},encodeUTF8Into(e,t,r){return H.toLocalBufferType(e).write(t,r,void 0,"utf8")},randomBytes:(()=>{try{return r(74314).randomBytes}catch{return C}})()};function V(e){if(e<0)throw new RangeError(`The argument 'byteLength' is invalid. Received ${e}`);return K.fromNumberArray(Array.from({length:e},(()=>Math.floor(256*Math.random()))))}const q=(()=>{const{crypto:e}=globalThis;if(null!=e&&"function"==typeof e.getRandomValues)return t=>e.getRandomValues(K.allocate(t));if(function(){const{navigator:e}=globalThis;return"object"==typeof e&&"ReactNative"===e.product}()){const{console:e}=globalThis;e?.warn?.("BSON: For React Native please polyfill crypto.getRandomValues, e.g. using: https://www.npmjs.com/package/react-native-get-random-values.")}return V})(),J=/(\d|[a-f])/i,K={toLocalBufferType(e){const t=e?.[Symbol.toStringTag]??Object.prototype.toString.call(e);if("Uint8Array"===t)return e;if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength));if("ArrayBuffer"===t||"SharedArrayBuffer"===t||"[object ArrayBuffer]"===t||"[object SharedArrayBuffer]"===t)return new Uint8Array(e);throw new k(`Cannot make a Uint8Array from ${String(e)}`)},allocate(e){if("number"!=typeof e)throw new TypeError(`The "size" argument must be of type number. Received ${String(e)}`);return new Uint8Array(e)},equals(e,t){if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0},fromNumberArray(e){return Uint8Array.from(e)},fromBase64(e){return Uint8Array.from(atob(e),(e=>e.charCodeAt(0)))},toBase64(e){return btoa(K.toISO88591(e))},fromISO88591(e){return Uint8Array.from(e,(e=>255&e.charCodeAt(0)))},toISO88591(e){return Array.from(Uint16Array.from(e),(e=>String.fromCharCode(e))).join("")},fromHex(e){const t=e.length%2==0?e:e.slice(0,e.length-1),r=[];for(let e=0;e<t.length;e+=2){const n=t[e],o=t[e+1];if(!J.test(n))break;if(!J.test(o))break;const i=Number.parseInt(`${n}${o}`,16);r.push(i)}return Uint8Array.from(r)},toHex(e){return Array.from(e,(e=>e.toString(16).padStart(2,"0"))).join("")},fromUTF8(e){return(new TextEncoder).encode(e)},toUTF8(e){return new TextDecoder("utf8",{fatal:!1}).decode(e)},utf8ByteLength(e){return K.fromUTF8(e).byteLength},encodeUTF8Into(e,t,r){const n=K.fromUTF8(t);return e.set(n,r),n.byteLength},randomBytes:q},Z="function"==typeof Buffer&&!0!==Buffer.prototype?._isBuffer?H:K;class Y extends DataView{static fromUint8Array(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}}class G{get[Symbol.for("@@mdb.bson.version")](){return a}}class W extends G{get _bsontype(){return"Binary"}constructor(e,t){if(super(),!(null==e||"string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||Array.isArray(e)))throw new k("Binary can only be constructed from string, Buffer, TypedArray, or Array<number>");this.sub_type=t??W.BSON_BINARY_SUBTYPE_DEFAULT,null==e?(this.buffer=Z.allocate(W.BUFFER_SIZE),this.position=0):("string"==typeof e?this.buffer=Z.fromISO88591(e):Array.isArray(e)?this.buffer=Z.fromNumberArray(e):this.buffer=Z.toLocalBufferType(e),this.position=this.buffer.byteLength)}put(e){if("string"==typeof e&&1!==e.length)throw new k("only accepts single character String");if("number"!=typeof e&&1!==e.length)throw new k("only accepts single character Uint8Array or Array");let t;if(t="string"==typeof e?e.charCodeAt(0):"number"==typeof e?e:e[0],t<0||t>255)throw new k("only accepts number in a valid unsigned byte range 0-255");if(this.buffer.byteLength>this.position)this.buffer[this.position++]=t;else{const e=Z.allocate(W.BUFFER_SIZE+this.buffer.length);e.set(this.buffer,0),this.buffer=e,this.buffer[this.position++]=t}}write(e,t){if(t="number"==typeof t?t:this.position,this.buffer.byteLength<t+e.length){const t=Z.allocate(this.buffer.byteLength+e.length);t.set(this.buffer,0),this.buffer=t}if(ArrayBuffer.isView(e))this.buffer.set(Z.toLocalBufferType(e),t),this.position=t+e.byteLength>this.position?t+e.length:this.position;else if("string"==typeof e){const r=Z.fromISO88591(e);this.buffer.set(r,t),this.position=t+e.length>this.position?t+e.length:this.position}}read(e,t){return t=t&&t>0?t:this.position,this.buffer.slice(e,e+t)}value(e){return(e=!!e)&&this.buffer.length===this.position?this.buffer:e?this.buffer.slice(0,this.position):Z.toISO88591(this.buffer.subarray(0,this.position))}length(){return this.position}toJSON(){return Z.toBase64(this.buffer)}toString(e){return"hex"===e?Z.toHex(this.buffer):"base64"===e?Z.toBase64(this.buffer):Z.toUTF8(this.buffer)}toExtendedJSON(e){e=e||{};const t=Z.toBase64(this.buffer),r=Number(this.sub_type).toString(16);return e.legacy?{$binary:t,$type:1===r.length?"0"+r:r}:{$binary:{base64:t,subType:1===r.length?"0"+r:r}}}toUUID(){if(this.sub_type===W.SUBTYPE_UUID)return new ee(this.buffer.slice(0,this.position));throw new k(`Binary sub_type "${this.sub_type}" is not supported for converting to UUID. Only "${W.SUBTYPE_UUID}" is currently supported.`)}static createFromHexString(e,t){return new W(Z.fromHex(e),t)}static createFromBase64(e,t){return new W(Z.fromBase64(e),t)}static fromExtendedJSON(e,t){let r,n;if(t=t||{},"$binary"in e?t.legacy&&"string"==typeof e.$binary&&"$type"in e?(n=e.$type?parseInt(e.$type,16):0,r=Z.fromBase64(e.$binary)):"string"!=typeof e.$binary&&(n=e.$binary.subType?parseInt(e.$binary.subType,16):0,r=Z.fromBase64(e.$binary.base64)):"$uuid"in e&&(n=4,r=ee.bytesFromString(e.$uuid)),!r)throw new k(`Unexpected Binary Extended JSON format ${JSON.stringify(e)}`);return n===D?new ee(r):new W(r,n)}[Symbol.for("nodejs.util.inspect.custom")](){return this.inspect()}inspect(){return`Binary.createFromBase64("${Z.toBase64(this.buffer.subarray(0,this.position))}", ${this.sub_type})`}}W.BSON_BINARY_SUBTYPE_DEFAULT=0,W.BUFFER_SIZE=256,W.SUBTYPE_DEFAULT=0,W.SUBTYPE_FUNCTION=1,W.SUBTYPE_BYTE_ARRAY=2,W.SUBTYPE_UUID_OLD=3,W.SUBTYPE_UUID=4,W.SUBTYPE_MD5=5,W.SUBTYPE_ENCRYPTED=6,W.SUBTYPE_COLUMN=7,W.SUBTYPE_USER_DEFINED=128;const Q=/^[0-9A-F]{32}$/i,X=/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i;class ee extends W{constructor(e){let t;if(null==e)t=ee.generate();else if(e instanceof ee)t=Z.toLocalBufferType(new Uint8Array(e.buffer));else if(ArrayBuffer.isView(e)&&16===e.byteLength)t=Z.toLocalBufferType(e);else{if("string"!=typeof e)throw new k("Argument passed in UUID constructor must be a UUID, a 16 byte Buffer or a 32/36 character hex string (dashes excluded/included, format: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");t=ee.bytesFromString(e)}super(t,D)}get id(){return this.buffer}set id(e){this.buffer=e}toHexString(e=!0){return e?[Z.toHex(this.buffer.subarray(0,4)),Z.toHex(this.buffer.subarray(4,6)),Z.toHex(this.buffer.subarray(6,8)),Z.toHex(this.buffer.subarray(8,10)),Z.toHex(this.buffer.subarray(10,16))].join("-"):Z.toHex(this.buffer)}toString(e){return"hex"===e?Z.toHex(this.id):"base64"===e?Z.toBase64(this.id):this.toHexString()}toJSON(){return this.toHexString()}equals(e){if(!e)return!1;if(e instanceof ee)return Z.equals(e.id,this.id);try{return Z.equals(new ee(e).id,this.id)}catch{return!1}}toBinary(){return new W(this.id,W.SUBTYPE_UUID)}static generate(){const e=Z.randomBytes(16);return e[6]=15&e[6]|64,e[8]=63&e[8]|128,e}static isValid(e){return!!e&&("string"==typeof e?ee.isValidUUIDString(e):o(e)?16===e.byteLength:"Binary"===e._bsontype&&e.sub_type===this.SUBTYPE_UUID&&16===e.buffer.byteLength)}static createFromHexString(e){const t=ee.bytesFromString(e);return new ee(t)}static createFromBase64(e){return new ee(Z.fromBase64(e))}static bytesFromString(e){if(!ee.isValidUUIDString(e))throw new k("UUID string representation must be 32 hex digits or canonical hyphenated representation");return Z.fromHex(e.replace(/-/g,""))}static isValidUUIDString(e){return Q.test(e)||X.test(e)}[Symbol.for("nodejs.util.inspect.custom")](){return this.inspect()}inspect(){return`new UUID("${this.toHexString()}")`}}ee.cacheHexString=!1;class te extends G{get _bsontype(){return"Code"}constructor(e,t){super(),this.code=e.toString(),this.scope=t??null}toJSON(){return null!=this.scope?{code:this.code,scope:this.scope}:{code:this.code}}toExtendedJSON(){return this.scope?{$code:this.code,$scope:this.scope}:{$code:this.code}}static fromExtendedJSON(e){return new te(e.$code,e.$scope)}[Symbol.for("nodejs.util.inspect.custom")](){return this.inspect()}inspect(){const e=this.toJSON();return`new Code("${String(e.code)}"${null!=e.scope?`, ${JSON.stringify(e.scope)}`:""})`}}function re(e){return null!=e&&"object"==typeof e&&"$id"in e&&null!=e.$id&&"$ref"in e&&"string"==typeof e.$ref&&(!("$db"in e)||"$db"in e&&"string"==typeof e.$db)}class ne extends G{get _bsontype(){return"DBRef"}constructor(e,t,r,n){super();const o=e.split(".");2===o.length&&(r=o.shift(),e=o.shift()),this.collection=e,this.oid=t,this.db=r,this.fields=n||{}}get namespace(){return this.collection}set namespace(e){this.collection=e}toJSON(){const e=Object.assign({$ref:this.collection,$id:this.oid},this.fields);return null!=this.db&&(e.$db=this.db),e}toExtendedJSON(e){e=e||{};let t={$ref:this.collection,$id:this.oid};return e.legacy||(this.db&&(t.$db=this.db),t=Object.assign(t,this.fields)),t}static fromExtendedJSON(e){const t=Object.assign({},e);return delete t.$ref,delete t.$id,delete t.$db,new ne(e.$ref,e.$id,e.$db,t)}[Symbol.for("nodejs.util.inspect.custom")](){return this.inspect()}inspect(){const e=void 0===this.oid||void 0===this.oid.toString?this.oid:this.oid.toString();return`new DBRef("${this.namespace}", new ObjectId("${String(e)}")${this.db?`, "${this.db}"`:""})`}}let oe;try{oe=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}const ie=4294967296,se=0x10000000000000000,ue=se/2,ae={},fe={},ce=/^(\+?0|(\+|-)?[1-9][0-9]*)$/;class le extends G{get _bsontype(){return"Long"}get __isLong__(){return!0}constructor(e=0,t,r){super(),"bigint"==typeof e?Object.assign(this,le.fromBigInt(e,!!t)):"string"==typeof e?Object.assign(this,le.fromString(e,!!t)):(this.low=0|e,this.high=0|t,this.unsigned=!!r)}static fromBits(e,t,r){return new le(e,t,r)}static fromInt(e,t){let r,n,o;return t?(o=0<=(e>>>=0)&&e<256)&&(n=fe[e],n)?n:(r=le.fromBits(e,(0|e)<0?-1:0,!0),o&&(fe[e]=r),r):(o=-128<=(e|=0)&&e<128)&&(n=ae[e],n)?n:(r=le.fromBits(e,e<0?-1:0,!1),o&&(ae[e]=r),r)}static fromNumber(e,t){if(isNaN(e))return t?le.UZERO:le.ZERO;if(t){if(e<0)return le.UZERO;if(e>=se)return le.MAX_UNSIGNED_VALUE}else{if(e<=-ue)return le.MIN_VALUE;if(e+1>=ue)return le.MAX_VALUE}return e<0?le.fromNumber(-e,t).neg():le.fromBits(e%ie|0,e/ie|0,t)}static fromBigInt(e,t){return le.fromString(e.toString(),t)}static fromString(e,t,r){if(0===e.length)throw new k("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return le.ZERO;if("number"==typeof t?(r=t,t=!1):t=!!t,(r=r||10)<2||36<r)throw new k("radix");let n;if((n=e.indexOf("-"))>0)throw new k("interior hyphen");if(0===n)return le.fromString(e.substring(1),t,r).neg();const o=le.fromNumber(Math.pow(r,8));let i=le.ZERO;for(let t=0;t<e.length;t+=8){const n=Math.min(8,e.length-t),s=parseInt(e.substring(t,t+n),r);if(n<8){const e=le.fromNumber(Math.pow(r,n));i=i.mul(e).add(le.fromNumber(s))}else i=i.mul(o),i=i.add(le.fromNumber(s))}return i.unsigned=t,i}static fromBytes(e,t,r){return r?le.fromBytesLE(e,t):le.fromBytesBE(e,t)}static fromBytesLE(e,t){return new le(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)}static fromBytesBE(e,t){return new le(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}static isLong(e){return null!=e&&"object"==typeof e&&"__isLong__"in e&&!0===e.__isLong__}static fromValue(e,t){return"number"==typeof e?le.fromNumber(e,t):"string"==typeof e?le.fromString(e,t):le.fromBits(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}add(e){le.isLong(e)||(e=le.fromValue(e));const t=this.high>>>16,r=65535&this.high,n=this.low>>>16,o=65535&this.low,i=e.high>>>16,s=65535&e.high,u=e.low>>>16;let a=0,f=0,c=0,l=0;return l+=o+(65535&e.low),c+=l>>>16,l&=65535,c+=n+u,f+=c>>>16,c&=65535,f+=r+s,a+=f>>>16,f&=65535,a+=t+i,a&=65535,le.fromBits(c<<16|l,a<<16|f,this.unsigned)}and(e){return le.isLong(e)||(e=le.fromValue(e)),le.fromBits(this.low&e.low,this.high&e.high,this.unsigned)}compare(e){if(le.isLong(e)||(e=le.fromValue(e)),this.eq(e))return 0;const t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1}comp(e){return this.compare(e)}divide(e){if(le.isLong(e)||(e=le.fromValue(e)),e.isZero())throw new k("division by zero");if(oe){if(!this.unsigned&&-2147483648===this.high&&-1===e.low&&-1===e.high)return this;const t=(this.unsigned?oe.div_u:oe.div_s)(this.low,this.high,e.low,e.high);return le.fromBits(t,oe.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?le.UZERO:le.ZERO;let t,r,n;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return le.UZERO;if(e.gt(this.shru(1)))return le.UONE;n=le.UZERO}else{if(this.eq(le.MIN_VALUE))return e.eq(le.ONE)||e.eq(le.NEG_ONE)?le.MIN_VALUE:e.eq(le.MIN_VALUE)?le.ONE:(t=this.shr(1).div(e).shl(1),t.eq(le.ZERO)?e.isNegative()?le.ONE:le.NEG_ONE:(r=this.sub(e.mul(t)),n=t.add(r.div(e)),n));if(e.eq(le.MIN_VALUE))return this.unsigned?le.UZERO:le.ZERO;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();n=le.ZERO}for(r=this;r.gte(e);){t=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));const o=Math.ceil(Math.log(t)/Math.LN2),i=o<=48?1:Math.pow(2,o-48);let s=le.fromNumber(t),u=s.mul(e);for(;u.isNegative()||u.gt(r);)t-=i,s=le.fromNumber(t,this.unsigned),u=s.mul(e);s.isZero()&&(s=le.ONE),n=n.add(s),r=r.sub(u)}return n}div(e){return this.divide(e)}equals(e){return le.isLong(e)||(e=le.fromValue(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low}eq(e){return this.equals(e)}getHighBits(){return this.high}getHighBitsUnsigned(){return this.high>>>0}getLowBits(){return this.low}getLowBitsUnsigned(){return this.low>>>0}getNumBitsAbs(){if(this.isNegative())return this.eq(le.MIN_VALUE)?64:this.neg().getNumBitsAbs();const e=0!==this.high?this.high:this.low;let t;for(t=31;t>0&&0==(e&1<<t);t--);return 0!==this.high?t+33:t+1}greaterThan(e){return this.comp(e)>0}gt(e){return this.greaterThan(e)}greaterThanOrEqual(e){return this.comp(e)>=0}gte(e){return this.greaterThanOrEqual(e)}ge(e){return this.greaterThanOrEqual(e)}isEven(){return 0==(1&this.low)}isNegative(){return!this.unsigned&&this.high<0}isOdd(){return 1==(1&this.low)}isPositive(){return this.unsigned||this.high>=0}isZero(){return 0===this.high&&0===this.low}lessThan(e){return this.comp(e)<0}lt(e){return this.lessThan(e)}lessThanOrEqual(e){return this.comp(e)<=0}lte(e){return this.lessThanOrEqual(e)}modulo(e){if(le.isLong(e)||(e=le.fromValue(e)),oe){const t=(this.unsigned?oe.rem_u:oe.rem_s)(this.low,this.high,e.low,e.high);return le.fromBits(t,oe.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))}mod(e){return this.modulo(e)}rem(e){return this.modulo(e)}multiply(e){if(this.isZero())return le.ZERO;if(le.isLong(e)||(e=le.fromValue(e)),oe){const t=oe.mul(this.low,this.high,e.low,e.high);return le.fromBits(t,oe.get_high(),this.unsigned)}if(e.isZero())return le.ZERO;if(this.eq(le.MIN_VALUE))return e.isOdd()?le.MIN_VALUE:le.ZERO;if(e.eq(le.MIN_VALUE))return this.isOdd()?le.MIN_VALUE:le.ZERO;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(le.TWO_PWR_24)&&e.lt(le.TWO_PWR_24))return le.fromNumber(this.toNumber()*e.toNumber(),this.unsigned);const t=this.high>>>16,r=65535&this.high,n=this.low>>>16,o=65535&this.low,i=e.high>>>16,s=65535&e.high,u=e.low>>>16,a=65535&e.low;let f=0,c=0,l=0,h=0;return h+=o*a,l+=h>>>16,h&=65535,l+=n*a,c+=l>>>16,l&=65535,l+=o*u,c+=l>>>16,l&=65535,c+=r*a,f+=c>>>16,c&=65535,c+=n*u,f+=c>>>16,c&=65535,c+=o*s,f+=c>>>16,c&=65535,f+=t*a+r*u+n*s+o*i,f&=65535,le.fromBits(l<<16|h,f<<16|c,this.unsigned)}mul(e){return this.multiply(e)}negate(){return!this.unsigned&&this.eq(le.MIN_VALUE)?le.MIN_VALUE:this.not().add(le.ONE)}neg(){return this.negate()}not(){return le.fromBits(~this.low,~this.high,this.unsigned)}notEquals(e){return!this.equals(e)}neq(e){return this.notEquals(e)}ne(e){return this.notEquals(e)}or(e){return le.isLong(e)||(e=le.fromValue(e)),le.fromBits(this.low|e.low,this.high|e.high,this.unsigned)}shiftLeft(e){return le.isLong(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?le.fromBits(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):le.fromBits(0,this.low<<e-32,this.unsigned)}shl(e){return this.shiftLeft(e)}shiftRight(e){return le.isLong(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?le.fromBits(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):le.fromBits(this.high>>e-32,this.high>=0?0:-1,this.unsigned)}shr(e){return this.shiftRight(e)}shiftRightUnsigned(e){if(le.isLong(e)&&(e=e.toInt()),0==(e&=63))return this;{const t=this.high;if(e<32){const r=this.low;return le.fromBits(r>>>e|t<<32-e,t>>>e,this.unsigned)}return 32===e?le.fromBits(t,0,this.unsigned):le.fromBits(t>>>e-32,0,this.unsigned)}}shr_u(e){return this.shiftRightUnsigned(e)}shru(e){return this.shiftRightUnsigned(e)}subtract(e){return le.isLong(e)||(e=le.fromValue(e)),this.add(e.neg())}sub(e){return this.subtract(e)}toInt(){return this.unsigned?this.low>>>0:this.low}toNumber(){return this.unsigned?(this.high>>>0)*ie+(this.low>>>0):this.high*ie+(this.low>>>0)}toBigInt(){return BigInt(this.toString())}toBytes(e){return e?this.toBytesLE():this.toBytesBE()}toBytesLE(){const e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]}toBytesBE(){const e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]}toSigned(){return this.unsigned?le.fromBits(this.low,this.high,!1):this}toString(e){if((e=e||10)<2||36<e)throw new k("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(le.MIN_VALUE)){const t=le.fromNumber(e),r=this.div(t),n=r.mul(t).sub(this);return r.toString(e)+n.toInt().toString(e)}return"-"+this.neg().toString(e)}const t=le.fromNumber(Math.pow(e,6),this.unsigned);let r=this,n="";for(;;){const o=r.div(t);let i=(r.sub(o.mul(t)).toInt()>>>0).toString(e);if(r=o,r.isZero())return i+n;for(;i.length<6;)i="0"+i;n=""+i+n}}toUnsigned(){return this.unsigned?this:le.fromBits(this.low,this.high,!0)}xor(e){return le.isLong(e)||(e=le.fromValue(e)),le.fromBits(this.low^e.low,this.high^e.high,this.unsigned)}eqz(){return this.isZero()}le(e){return this.lessThanOrEqual(e)}toExtendedJSON(e){return e&&e.relaxed?this.toNumber():{$numberLong:this.toString()}}static fromExtendedJSON(e,t){const{useBigInt64:r=!1,relaxed:n=!0}={...t};if(e.$numberLong.length>20)throw new k("$numberLong string is too long");if(!ce.test(e.$numberLong))throw new k(`$numberLong string "${e.$numberLong}" is in an invalid format`);if(r){const t=BigInt(e.$numberLong);return BigInt.asIntN(64,t)}const o=le.fromString(e.$numberLong);return n?o.toNumber():o}[Symbol.for("nodejs.util.inspect.custom")](){return this.inspect()}inspect(){return`new Long("${this.toString()}"${this.unsigned?", true":""})`}}le.TWO_PWR_24=le.fromInt(1<<24),le.MAX_UNSIGNED_VALUE=le.fromBits(-1,-1,!0),le.ZERO=le.fromInt(0),le.UZERO=le.fromInt(0,!0),le.ONE=le.fromInt(1),le.UONE=le.fromInt(1,!0),le.NEG_ONE=le.fromInt(-1),le.MAX_VALUE=le.fromBits(-1,2147483647,!1),le.MIN_VALUE=le.fromBits(0,-2147483648,!1);const he=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,pe=/^(\+|-)?(Infinity|inf)$/i,de=/^(\+|-)?NaN$/i,ye=6111,ge=-6176,be=Z.fromNumberArray([124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),me=Z.fromNumberArray([248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),we=Z.fromNumberArray([120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),ve=/^([-+])?(\d+)?$/;function _e(e){return!isNaN(parseInt(e,10))}function Se(e){const t=le.fromNumber(1e9);let r=le.fromNumber(0);if(!(e.parts[0]||e.parts[1]||e.parts[2]||e.parts[3]))return{quotient:e,rem:r};for(let n=0;n<=3;n++)r=r.shiftLeft(32),r=r.add(new le(e.parts[n],0)),e.parts[n]=r.div(t).low,r=r.modulo(t);return{quotient:e,rem:r}}function Oe(e,t){throw new k(`"${e}" is not a valid Decimal128 string - ${t}`)}class xe extends G{get _bsontype(){return"Decimal128"}constructor(e){if(super(),"string"==typeof e)this.bytes=xe.fromString(e).bytes;else{if(!o(e))throw new k("Decimal128 must take a Buffer or string");if(16!==e.byteLength)throw new k("Decimal128 must take a Buffer of 16 bytes");this.bytes=e}}static fromString(e){let t=!1,r=!1,n=!1,o=0,i=0,s=0,u=0,a=0;const f=[0];let c=0,l=0,h=0,p=0,d=0,y=0,g=new le(0,0),b=new le(0,0),m=0,w=0;if(e.length>=7e3)throw new k(e+" not a valid Decimal128 string");const v=e.match(he),_=e.match(pe),S=e.match(de);if(!v&&!_&&!S||0===e.length)throw new k(e+" not a valid Decimal128 string");if(v){const t=v[2],r=v[4],n=v[5],o=v[6];r&&void 0===o&&Oe(e,"missing exponent power"),r&&void 0===t&&Oe(e,"missing exponent base"),void 0===r&&(n||o)&&Oe(e,"missing e before exponent")}if("+"!==e[w]&&"-"!==e[w]||(t="-"===e[w++]),!_e(e[w])&&"."!==e[w]){if("i"===e[w]||"I"===e[w])return new xe(t?me:we);if("N"===e[w])return new xe(be)}for(;_e(e[w])||"."===e[w];)"."!==e[w]?(c<34&&("0"!==e[w]||n)&&(n||(a=i),n=!0,f[l++]=parseInt(e[w],10),c+=1),n&&(s+=1),r&&(u+=1),i+=1,w+=1):(r&&Oe(e,"contains multiple periods"),r=!0,w+=1);if(r&&!i)throw new k(e+" not a valid Decimal128 string");if("e"===e[w]||"E"===e[w]){const t=e.substr(++w).match(ve);if(!t||!t[2])return new xe(be);d=parseInt(t[0],10),w+=t[0].length}if(e[w])return new xe(be);if(h=0,c){if(p=c-1,o=s,1!==o)for(;0===f[a+o-1];)o-=1}else h=0,p=0,f[0]=0,s=1,c=1,o=0;for(d<=u&&u-d>16384?d=ge:d-=u;d>ye;){if(p+=1,p-h>34){if(f.join("").match(/^0+$/)){d=ye;break}Oe(e,"overflow")}d-=1}for(;d<ge||c<s;){if(0===p&&o<c){d=ge,o=0;break}if(c<s?s-=1:p-=1,d<ye)d+=1;else{if(f.join("").match(/^0+$/)){d=ye;break}Oe(e,"overflow")}}if(p-h+1<o){let n=i;r&&(a+=1,n+=1),t&&(a+=1,n+=1);const o=parseInt(e[a+p+1],10);let s=0;if(o>=5&&(s=1,5===o))for(s=f[p]%2==1?1:0,y=a+p+2;y<n;y++)if(parseInt(e[y],10)){s=1;break}if(s){let e=p;for(;e>=0;e--)if(++f[e]>9&&(f[e]=0,0===e)){if(!(d<ye))return new xe(t?me:we);d+=1,f[e]=1}}}if(g=le.fromNumber(0),b=le.fromNumber(0),0===o)g=le.fromNumber(0),b=le.fromNumber(0);else if(p-h<17){let e=h;for(b=le.fromNumber(f[e++]),g=new le(0,0);e<=p;e++)b=b.multiply(le.fromNumber(10)),b=b.add(le.fromNumber(f[e]))}else{let e=h;for(g=le.fromNumber(f[e++]);e<=p-17;e++)g=g.multiply(le.fromNumber(10)),g=g.add(le.fromNumber(f[e]));for(b=le.fromNumber(f[e++]);e<=p;e++)b=b.multiply(le.fromNumber(10)),b=b.add(le.fromNumber(f[e]))}const O=function(e,t){if(!e&&!t)return{high:le.fromNumber(0),low:le.fromNumber(0)};const r=e.shiftRightUnsigned(32),n=new le(e.getLowBits(),0),o=t.shiftRightUnsigned(32),i=new le(t.getLowBits(),0);let s=r.multiply(o),u=r.multiply(i);const a=n.multiply(o);let f=n.multiply(i);return s=s.add(u.shiftRightUnsigned(32)),u=new le(u.getLowBits(),0).add(a).add(f.shiftRightUnsigned(32)),s=s.add(u.shiftRightUnsigned(32)),f=u.shiftLeft(32).add(new le(f.getLowBits(),0)),{high:s,low:f}}(g,le.fromString("100000000000000000"));O.low=O.low.add(b),function(e,t){const r=e.high>>>0,n=t.high>>>0;return r<n||r===n&&e.low>>>0<t.low>>>0}(O.low,b)&&(O.high=O.high.add(le.fromNumber(1))),m=d+6176;const x={low:le.fromNumber(0),high:le.fromNumber(0)};O.high.shiftRightUnsigned(49).and(le.fromNumber(1)).equals(le.fromNumber(1))?(x.high=x.high.or(le.fromNumber(3).shiftLeft(61)),x.high=x.high.or(le.fromNumber(m).and(le.fromNumber(16383).shiftLeft(47))),x.high=x.high.or(O.high.and(le.fromNumber(0x7fffffffffff)))):(x.high=x.high.or(le.fromNumber(16383&m).shiftLeft(49)),x.high=x.high.or(O.high.and(le.fromNumber(562949953421311)))),x.low=O.low,t&&(x.high=x.high.or(le.fromString("9223372036854775808")));const B=Z.allocate(16);return w=0,B[w++]=255&x.low.low,B[w++]=x.low.low>>8&255,B[w++]=x.low.low>>16&255,B[w++]=x.low.low>>24&255,B[w++]=255&x.low.high,B[w++]=x.low.high>>8&255,B[w++]=x.low.high>>16&255,B[w++]=x.low.high>>24&255,B[w++]=255&x.high.low,B[w++]=x.high.low>>8&255,B[w++]=x.high.low>>16&255,B[w++]=x.high.low>>24&255,B[w++]=255&x.high.high,B[w++]=x.high.high>>8&255,B[w++]=x.high.high>>16&255,B[w++]=x.high.high>>24&255,new xe(B)}toString(){let e,t=0;const r=new Array(36);for(let e=0;e<r.length;e++)r[e]=0;let n,o,i,s=0,u=!1,a={parts:[0,0,0,0]};const f=[];s=0;const c=this.bytes,l=c[s++]|c[s++]<<8|c[s++]<<16|c[s++]<<24,h=c[s++]|c[s++]<<8|c[s++]<<16|c[s++]<<24,p=c[s++]|c[s++]<<8|c[s++]<<16|c[s++]<<24,d=c[s++]|c[s++]<<8|c[s++]<<16|c[s++]<<24;s=0,(new le(l,h),new le(p,d)).lessThan(le.ZERO)&&f.push("-");const y=d>>26&31;if(y>>3==3){if(30===y)return f.join("")+"Infinity";if(31===y)return"NaN";e=d>>15&16383,n=8+(d>>14&1)}else n=d>>14&7,e=d>>17&16383;const g=e-6176;if(a.parts[0]=(16383&d)+((15&n)<<14),a.parts[1]=p,a.parts[2]=h,a.parts[3]=l,0===a.parts[0]&&0===a.parts[1]&&0===a.parts[2]&&0===a.parts[3])u=!0;else for(i=3;i>=0;i--){let e=0;const t=Se(a);if(a=t.quotient,e=t.rem.low,e)for(o=8;o>=0;o--)r[9*i+o]=e%10,e=Math.floor(e/10)}if(u)t=1,r[s]=0;else for(t=36;!r[s];)t-=1,s+=1;const b=t-1+g;if(b>=34||b<=-7||g>0){if(t>34)return f.push("0"),g>0?f.push(`E+${g}`):g<0&&f.push(`E${g}`),f.join("");f.push(`${r[s++]}`),t-=1,t&&f.push(".");for(let e=0;e<t;e++)f.push(`${r[s++]}`);f.push("E"),b>0?f.push(`+${b}`):f.push(`${b}`)}else if(g>=0)for(let e=0;e<t;e++)f.push(`${r[s++]}`);else{let e=t+g;if(e>0)for(let t=0;t<e;t++)f.push(`${r[s++]}`);else f.push("0");for(f.push(".");e++<0;)f.push("0");for(let n=0;n<t-Math.max(e-1,0);n++)f.push(`${r[s++]}`)}return f.join("")}toJSON(){return{$numberDecimal:this.toString()}}toExtendedJSON(){return{$numberDecimal:this.toString()}}static fromExtendedJSON(e){return xe.fromString(e.$numberDecimal)}[Symbol.for("nodejs.util.inspect.custom")](){return this.inspect()}inspect(){return`new Decimal128("${this.toString()}")`}}class Be extends G{get _bsontype(){return"Double"}constructor(e){super(),e instanceof Number&&(e=e.valueOf()),this.value=+e}valueOf(){return this.value}toJSON(){return this.value}toString(e){return this.value.toString(e)}toExtendedJSON(e){return e&&(e.legacy||e.relaxed&&isFinite(this.value))?this.value:Object.is(Math.sign(this.value),-0)?{$numberDouble:"-0.0"}:{$numberDouble:Number.isInteger(this.value)?this.value.toFixed(1):this.value.toString()}}static fromExtendedJSON(e,t){const r=parseFloat(e.$numberDouble);return t&&t.relaxed?r:new Be(r)}[Symbol.for("nodejs.util.inspect.custom")](){return this.inspect()}inspect(){return`new Double(${this.toExtendedJSON().$numberDouble})`}}class Ee extends G{get _bsontype(){return"Int32"}constructor(e){super(),e instanceof Number&&(e=e.valueOf()),this.value=0|+e}valueOf(){return this.value}toString(e){return this.value.toString(e)}toJSON(){return this.value}toExtendedJSON(e){return e&&(e.relaxed||e.legacy)?this.value:{$numberInt:this.value.toString()}}static fromExtendedJSON(e,t){return t&&t.relaxed?parseInt(e.$numberInt,10):new Ee(e.$numberInt)}[Symbol.for("nodejs.util.inspect.custom")](){return this.inspect()}inspect(){return`new Int32(${this.valueOf()})`}}class Ne extends G{get _bsontype(){return"MaxKey"}toExtendedJSON(){return{$maxKey:1}}static fromExtendedJSON(){return new Ne}[Symbol.for("nodejs.util.inspect.custom")](){return this.inspect()}inspect(){return"new MaxKey()"}}class je extends G{get _bsontype(){return"MinKey"}toExtendedJSON(){return{$minKey:1}}static fromExtendedJSON(){return new je}[Symbol.for("nodejs.util.inspect.custom")](){return this.inspect()}inspect(){return"new MinKey()"}}const Te=new RegExp("^[0-9a-fA-F]{24}$");let Ie=null;const Ue=Symbol("id");class $e extends G{get _bsontype(){return"ObjectId"}constructor(e){let t;if(super(),"object"==typeof e&&e&&"id"in e){if("string"!=typeof e.id&&!ArrayBuffer.isView(e.id))throw new k("Argument passed in must have an id that is of type string or Buffer");t="toHexString"in e&&"function"==typeof e.toHexString?Z.fromHex(e.toHexString()):e.id}else t=e;if(null==t||"number"==typeof t)this[Ue]=$e.generate("number"==typeof t?t:void 0);else if(ArrayBuffer.isView(t)&&12===t.byteLength)this[Ue]=Z.toLocalBufferType(t);else{if("string"!=typeof t)throw new k("Argument passed in does not match the accepted types");if(12===t.length){const e=Z.fromUTF8(t);if(12!==e.byteLength)throw new k("Argument passed in must be a string of 12 bytes");this[Ue]=e}else{if(24!==t.length||!Te.test(t))throw new k("Argument passed in must be a string of 12 bytes or a string of 24 hex characters or an integer");this[Ue]=Z.fromHex(t)}}$e.cacheHexString&&(this.__id=Z.toHex(this.id))}get id(){return this[Ue]}set id(e){this[Ue]=e,$e.cacheHexString&&(this.__id=Z.toHex(e))}toHexString(){if($e.cacheHexString&&this.__id)return this.__id;const e=Z.toHex(this.id);return $e.cacheHexString&&!this.__id&&(this.__id=e),e}static getInc(){return $e.index=($e.index+1)%16777215}static generate(e){"number"!=typeof e&&(e=Math.floor(Date.now()/1e3));const t=$e.getInc(),r=Z.allocate(12);return Y.fromUint8Array(r).setUint32(0,e,!1),null===Ie&&(Ie=Z.randomBytes(5)),r[4]=Ie[0],r[5]=Ie[1],r[6]=Ie[2],r[7]=Ie[3],r[8]=Ie[4],r[11]=255&t,r[10]=t>>8&255,r[9]=t>>16&255,r}toString(e){return"base64"===e?Z.toBase64(this.id):this.toHexString()}toJSON(){return this.toHexString()}equals(e){if(null==e)return!1;if(e instanceof $e)return this[Ue][11]===e[Ue][11]&&Z.equals(this[Ue],e[Ue]);if("string"==typeof e&&$e.isValid(e)&&12===e.length&&o(this.id))return Z.equals(this.id,Z.fromISO88591(e));if("string"==typeof e&&$e.isValid(e)&&24===e.length)return e.toLowerCase()===this.toHexString();if("string"==typeof e&&$e.isValid(e)&&12===e.length)return Z.equals(Z.fromUTF8(e),this.id);if("object"==typeof e&&"toHexString"in e&&"function"==typeof e.toHexString){const t=e.toHexString(),r=this.toHexString().toLowerCase();return"string"==typeof t&&t.toLowerCase()===r}return!1}getTimestamp(){const e=new Date,t=Y.fromUint8Array(this.id).getUint32(0,!1);return e.setTime(1e3*Math.floor(t)),e}static createPk(){return new $e}static createFromTime(e){const t=Z.fromNumberArray([0,0,0,0,0,0,0,0,0,0,0,0]);return Y.fromUint8Array(t).setUint32(0,e,!1),new $e(t)}static createFromHexString(e){if(24!==e?.length)throw new k("hex string must be 24 characters");return new $e(Z.fromHex(e))}static createFromBase64(e){if(16!==e?.length)throw new k("base64 string must be 16 characters");return new $e(Z.fromBase64(e))}static isValid(e){if(null==e)return!1;try{return new $e(e),!0}catch{return!1}}toExtendedJSON(){return this.toHexString?{$oid:this.toHexString()}:{$oid:this.toString("hex")}}static fromExtendedJSON(e){return new $e(e.$oid)}[Symbol.for("nodejs.util.inspect.custom")](){return this.inspect()}inspect(){return`new ObjectId("${this.toHexString()}")`}}function Ae(e,t,r){let n=5;if(Array.isArray(e))for(let o=0;o<e.length;o++)n+=Le(o.toString(),e[o],t,!0,r);else{"function"==typeof e?.toBSON&&(e=e.toBSON());for(const o of Object.keys(e))n+=Le(o,e[o],t,!1,r)}return n}function Le(e,t,r=!1,o=!1,s=!1){switch("function"==typeof t?.toBSON&&(t=t.toBSON()),typeof t){case"string":return 1+Z.utf8ByteLength(e)+1+4+Z.utf8ByteLength(t)+1;case"number":return Math.floor(t)===t&&t>=d&&t<=p&&t>=c&&t<=f?(null!=e?Z.utf8ByteLength(e)+1:0)+5:(null!=e?Z.utf8ByteLength(e)+1:0)+9;case"undefined":return o||!s?(null!=e?Z.utf8ByteLength(e)+1:0)+1:0;case"boolean":return(null!=e?Z.utf8ByteLength(e)+1:0)+2;case"object":if(null!=t&&"string"==typeof t._bsontype&&t[Symbol.for("@@mdb.bson.version")]!==a)throw new F;if(null==t||"MinKey"===t._bsontype||"MaxKey"===t._bsontype)return(null!=e?Z.utf8ByteLength(e)+1:0)+1;if("ObjectId"===t._bsontype)return(null!=e?Z.utf8ByteLength(e)+1:0)+13;if(t instanceof Date||u(t))return(null!=e?Z.utf8ByteLength(e)+1:0)+9;if(ArrayBuffer.isView(t)||t instanceof ArrayBuffer||n(t))return(null!=e?Z.utf8ByteLength(e)+1:0)+6+t.byteLength;if("Long"===t._bsontype||"Double"===t._bsontype||"Timestamp"===t._bsontype)return(null!=e?Z.utf8ByteLength(e)+1:0)+9;if("Decimal128"===t._bsontype)return(null!=e?Z.utf8ByteLength(e)+1:0)+17;if("Code"===t._bsontype)return null!=t.scope&&Object.keys(t.scope).length>0?(null!=e?Z.utf8ByteLength(e)+1:0)+1+4+4+Z.utf8ByteLength(t.code.toString())+1+Ae(t.scope,r,s):(null!=e?Z.utf8ByteLength(e)+1:0)+1+4+Z.utf8ByteLength(t.code.toString())+1;if("Binary"===t._bsontype){const r=t;return r.sub_type===W.SUBTYPE_BYTE_ARRAY?(null!=e?Z.utf8ByteLength(e)+1:0)+(r.position+1+4+1+4):(null!=e?Z.utf8ByteLength(e)+1:0)+(r.position+1+4+1)}if("Symbol"===t._bsontype)return(null!=e?Z.utf8ByteLength(e)+1:0)+Z.utf8ByteLength(t.value)+4+1+1;if("DBRef"===t._bsontype){const n=Object.assign({$ref:t.collection,$id:t.oid},t.fields);return null!=t.db&&(n.$db=t.db),(null!=e?Z.utf8ByteLength(e)+1:0)+1+Ae(n,r,s)}return t instanceof RegExp||i(t)?(null!=e?Z.utf8ByteLength(e)+1:0)+1+Z.utf8ByteLength(t.source)+1+(t.global?1:0)+(t.ignoreCase?1:0)+(t.multiline?1:0)+1:"BSONRegExp"===t._bsontype?(null!=e?Z.utf8ByteLength(e)+1:0)+1+Z.utf8ByteLength(t.pattern)+1+Z.utf8ByteLength(t.options)+1:(null!=e?Z.utf8ByteLength(e)+1:0)+Ae(t,r,s)+1;case"function":if(r)return(null!=e?Z.utf8ByteLength(e)+1:0)+1+4+Z.utf8ByteLength(t.toString())+1}return 0}$e.index=Math.floor(16777215*Math.random());class Pe extends G{get _bsontype(){return"BSONRegExp"}constructor(e,t){if(super(),this.pattern=e,this.options=(t??"").split("").sort().join(""),-1!==this.pattern.indexOf("\0"))throw new k(`BSON Regex patterns cannot contain null bytes, found: ${JSON.stringify(this.pattern)}`);if(-1!==this.options.indexOf("\0"))throw new k(`BSON Regex options cannot contain null bytes, found: ${JSON.stringify(this.options)}`);for(let e=0;e<this.options.length;e++)if("i"!==this.options[e]&&"m"!==this.options[e]&&"x"!==this.options[e]&&"l"!==this.options[e]&&"s"!==this.options[e]&&"u"!==this.options[e])throw new k(`The regular expression option [${this.options[e]}] is not supported`)}static parseOptions(e){return e?e.split("").sort().join(""):""}toExtendedJSON(e){return(e=e||{}).legacy?{$regex:this.pattern,$options:this.options}:{$regularExpression:{pattern:this.pattern,options:this.options}}}static fromExtendedJSON(e){if("$regex"in e){if("string"==typeof e.$regex)return new Pe(e.$regex,Pe.parseOptions(e.$options));if("BSONRegExp"===e.$regex._bsontype)return e}if("$regularExpression"in e)return new Pe(e.$regularExpression.pattern,Pe.parseOptions(e.$regularExpression.options));throw new k(`Unexpected BSONRegExp EJSON object form: ${JSON.stringify(e)}`)}[Symbol.for("nodejs.util.inspect.custom")](){return this.inspect()}inspect(){return`new BSONRegExp(${JSON.stringify(this.pattern)}, ${JSON.stringify(this.options)})`}}class Re extends G{get _bsontype(){return"BSONSymbol"}constructor(e){super(),this.value=e}valueOf(){return this.value}toString(){return this.value}inspect(){return`new BSONSymbol("${this.value}")`}toJSON(){return this.value}toExtendedJSON(){return{$symbol:this.value}}static fromExtendedJSON(e){return new Re(e.$symbol)}[Symbol.for("nodejs.util.inspect.custom")](){return this.inspect()}}const De=le;class Me extends De{get _bsontype(){return"Timestamp"}constructor(e){if(null==e)super(0,0,!0);else if("bigint"==typeof e)super(e,!0);else if(le.isLong(e))super(e.low,e.high,!0);else{if("object"!=typeof e||!("t"in e)||!("i"in e))throw new k("A Timestamp can only be constructed with: bigint, Long, or { t: number; i: number }");if("number"!=typeof e.t&&("object"!=typeof e.t||"Int32"!==e.t._bsontype))throw new k("Timestamp constructed from { t, i } must provide t as a number");if("number"!=typeof e.i&&("object"!=typeof e.i||"Int32"!==e.i._bsontype))throw new k("Timestamp constructed from { t, i } must provide i as a number");if(e.t<0)throw new k("Timestamp constructed from { t, i } must provide a positive t");if(e.i<0)throw new k("Timestamp constructed from { t, i } must provide a positive i");if(e.t>4294967295)throw new k("Timestamp constructed from { t, i } must provide t equal or less than uint32 max");if(e.i>4294967295)throw new k("Timestamp constructed from { t, i } must provide i equal or less than uint32 max");super(e.i.valueOf(),e.t.valueOf(),!0)}}toJSON(){return{$timestamp:this.toString()}}static fromInt(e){return new Me(le.fromInt(e,!0))}static fromNumber(e){return new Me(le.fromNumber(e,!0))}static fromBits(e,t){return new Me({i:e,t:t})}static fromString(e,t){return new Me(le.fromString(e,!0,t))}toExtendedJSON(){return{$timestamp:{t:this.high>>>0,i:this.low>>>0}}}static fromExtendedJSON(e){const t=le.isLong(e.$timestamp.i)?e.$timestamp.i.getLowBitsUnsigned():e.$timestamp.i,r=le.isLong(e.$timestamp.t)?e.$timestamp.t.getLowBitsUnsigned():e.$timestamp.t;return new Me({t:r,i:t})}[Symbol.for("nodejs.util.inspect.custom")](){return this.inspect()}inspect(){return`new Timestamp({ t: ${this.getHighBits()}, i: ${this.getLowBits()} })`}}Me.MAX_VALUE=le.MAX_UNSIGNED_VALUE;const ke=128,Fe=192,ze=224,Ce=240,He=248,Ve=192,qe=224,Je=240,Ke=128;function Ze(e,t,r){let n=0;for(let o=t;o<r;o+=1){const t=e[o];if(n){if((t&Fe)!==Ke)return!1;n-=1}else if(t&ke)if((t&ze)===Ve)n=1;else if((t&Ce)===qe)n=2;else{if((t&He)!==Je)return!1;n=3}}return!n}const Ye=le.fromNumber(p),Ge=le.fromNumber(d);function We(e,t,r){const n=(t=null==t?{}:t)&&t.index?t.index:0,o=e[n]|e[n+1]<<8|e[n+2]<<16|e[n+3]<<24;if(o<5)throw new k(`bson size must be >= 5, is ${o}`);if(t.allowObjectSmallerThanBufferSize&&e.length<o)throw new k(`buffer length ${e.length} must be >= bson size ${o}`);if(!t.allowObjectSmallerThanBufferSize&&e.length!==o)throw new k(`buffer length ${e.length} must === bson size ${o}`);if(o+n>e.byteLength)throw new k(`(bson size ${o} + options.index ${n} must be <= buffer length ${e.byteLength})`);if(0!==e[n+o-1])throw new k("One object, sized correctly, with a spot for an EOO, but the EOO isn't 0x00");return Xe(e,n,t,r)}const Qe=/^\$ref$|^\$id$|^\$db$/;function Xe(e,t,r,n=!1){const o=null==r.fieldsAsRaw?null:r.fieldsAsRaw,i=null!=r.raw&&r.raw,s="boolean"==typeof r.bsonRegExp&&r.bsonRegExp,u=r.promoteBuffers??!1,a=r.promoteLongs??!0,f=r.promoteValues??!0,c=r.useBigInt64??!1;if(c&&!f)throw new k("Must either request bigint or Long for int64 deserialization");if(c&&!a)throw new k("Must either request bigint or Long for int64 deserialization");const l=null==r.validation?{utf8:!0}:r.validation;let h,p=!0;const d=new Set,R=l.utf8;if("boolean"==typeof R)h=R;else{p=!1;const e=Object.keys(R).map((function(e){return R[e]}));if(0===e.length)throw new k("UTF-8 validation setting cannot be empty");if("boolean"!=typeof e[0])throw new k("Invalid UTF-8 validation option, must specify boolean values");if(h=e[0],!e.every((e=>e===h)))throw new k("Invalid UTF-8 validation option - keys must be all true or all false")}if(!p)for(const e of Object.keys(R))d.add(e);const M=t;if(e.length<5)throw new k("corrupt bson message < 5 bytes long");const F=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(F<5||F>e.length)throw new k("corrupt bson message");const z=n?[]:{};let C=0,H=!n&&null;const V=new DataView(e.buffer,e.byteOffset,e.byteLength);for(;;){const R=e[t++];if(0===R)break;let M=t;for(;0!==e[M]&&M<e.length;)M++;if(M>=e.byteLength)throw new k("Bad BSON Document: illegal CString");const F=n?C++:Z.toUTF8(e.subarray(t,M));let q,J=!0;if(J=p||d.has(F)?h:!h,!1!==H&&"$"===F[0]&&(H=Qe.test(F)),t=M+1,R===g){const r=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(r<=0||r>e.length-t||0!==e[t+r-1])throw new k("bad string length in bson");q=et(e,t,t+r-1,J),t+=r}else if(R===_){const r=Z.allocate(12);r.set(e.subarray(t,t+12)),q=new $e(r),t+=12}else if(R===I&&!1===f)q=new Ee(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24);else if(R===I)q=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;else if(R===y&&!1===f)q=new Be(V.getFloat64(t,!0)),t+=8;else if(R===y)q=V.getFloat64(t,!0),t+=8;else if(R===O){const r=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,n=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;q=new Date(new le(r,n).toNumber())}else if(R===S){if(0!==e[t]&&1!==e[t])throw new k("illegal boolean type value");q=1===e[t++]}else if(R===b){const n=t,o=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24;if(o<=0||o>e.length-t)throw new k("bad embedded document length in bson");if(i)q=e.slice(t,t+o);else{let t=r;p||(t={...r,validation:{utf8:J}}),q=Xe(e,n,t,!1)}t+=o}else if(R===m){const n=t,i=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24;let s=r;const u=t+i;if(o&&o[F]&&(s={...r,raw:!0}),p||(s={...s,validation:{utf8:J}}),q=Xe(e,n,s,!0),0!==e[(t+=i)-1])throw new k("invalid array terminator byte");if(t!==u)throw new k("corrupted array bson")}else if(R===v)q=void 0;else if(R===x)q=null;else if(R===$){const r=Y.fromUint8Array(e.subarray(t,t+8)),n=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,o=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,i=new le(n,o);q=c?r.getBigInt64(0,!0):a&&!0===f&&i.lessThanOrEqual(Ye)&&i.greaterThanOrEqual(Ge)?i.toNumber():i}else if(R===A){const r=Z.allocate(16);r.set(e.subarray(t,t+16),0),t+=16,q=new xe(r)}else if(R===w){let r=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;const n=r,o=e[t++];if(r<0)throw new k("Negative binary type element size found");if(r>e.byteLength)throw new k("Binary type size larger than document size");if(null!=e.slice){if(o===W.SUBTYPE_BYTE_ARRAY){if(r=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,r<0)throw new k("Negative binary type element size found for subtype 0x02");if(r>n-4)throw new k("Binary type with subtype 0x02 contains too long binary size");if(r<n-4)throw new k("Binary type with subtype 0x02 contains too short binary size")}u&&f?q=Z.toLocalBufferType(e.slice(t,t+r)):(q=new W(e.slice(t,t+r),o),o===D&&ee.isValid(q)&&(q=q.toUUID()))}else{const i=Z.allocate(r);if(o===W.SUBTYPE_BYTE_ARRAY){if(r=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,r<0)throw new k("Negative binary type element size found for subtype 0x02");if(r>n-4)throw new k("Binary type with subtype 0x02 contains too long binary size");if(r<n-4)throw new k("Binary type with subtype 0x02 contains too short binary size")}for(M=0;M<r;M++)i[M]=e[t+M];u&&f?q=i:(q=new W(e.slice(t,t+r),o),o===D&&ee.isValid(q)&&(q=q.toUUID()))}t+=r}else if(R===B&&!1===s){for(M=t;0!==e[M]&&M<e.length;)M++;if(M>=e.length)throw new k("Bad BSON Document: illegal CString");const r=Z.toUTF8(e.subarray(t,M));for(M=t=M+1;0!==e[M]&&M<e.length;)M++;if(M>=e.length)throw new k("Bad BSON Document: illegal CString");const n=Z.toUTF8(e.subarray(t,M));t=M+1;const o=new Array(n.length);for(M=0;M<n.length;M++)switch(n[M]){case"m":o[M]="m";break;case"s":o[M]="g";break;case"i":o[M]="i"}q=new RegExp(r,o.join(""))}else if(R===B&&!0===s){for(M=t;0!==e[M]&&M<e.length;)M++;if(M>=e.length)throw new k("Bad BSON Document: illegal CString");const r=Z.toUTF8(e.subarray(t,M));for(M=t=M+1;0!==e[M]&&M<e.length;)M++;if(M>=e.length)throw new k("Bad BSON Document: illegal CString");const n=Z.toUTF8(e.subarray(t,M));t=M+1,q=new Pe(r,n)}else if(R===j){const r=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(r<=0||r>e.length-t||0!==e[t+r-1])throw new k("bad string length in bson");const n=et(e,t,t+r-1,J);q=f?n:new Re(n),t+=r}else if(R===U){const r=e[t++]+256*e[t++]+65536*e[t++]+e[t++]*(1<<24),n=e[t++]+256*e[t++]+65536*e[t++]+e[t++]*(1<<24);q=new Me({i:r,t:n})}else if(R===L)q=new je;else if(R===P)q=new Ne;else if(R===N){const r=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(r<=0||r>e.length-t||0!==e[t+r-1])throw new k("bad string length in bson");const n=et(e,t,t+r-1,J);q=new te(n),t+=r}else if(R===T){const n=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(n<13)throw new k("code_w_scope total size shorter minimum expected length");const o=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(o<=0||o>e.length-t||0!==e[t+o-1])throw new k("bad string length in bson");const i=et(e,t,t+o-1,J),s=t+=o,u=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24,a=Xe(e,s,r,!1);if(t+=u,n<8+u+o)throw new k("code_w_scope total size is too short, truncating scope");if(n>8+u+o)throw new k("code_w_scope total size is too long, clips outer document");q=new te(i,a)}else{if(R!==E)throw new k(`Detected unknown BSON type ${R.toString(16)} for fieldname "${F}"`);{const r=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(r<=0||r>e.length-t||0!==e[t+r-1])throw new k("bad string length in bson");if(null!=l&&l.utf8&&!Ze(e,t,t+r-1))throw new k("Invalid UTF-8 string in BSON document");const n=Z.toUTF8(e.subarray(t,t+r-1));t+=r;const o=Z.allocate(12);o.set(e.subarray(t,t+12),0);const i=new $e(o);t+=12,q=new ne(n,i)}}"__proto__"===F?Object.defineProperty(z,F,{value:q,writable:!0,enumerable:!0,configurable:!0}):z[F]=q}if(F!==t-M){if(n)throw new k("corrupt array bson");throw new k("corrupt object bson")}if(!H)return z;if(re(z)){const e=Object.assign({},z);return delete e.$ref,delete e.$id,delete e.$db,new ne(z.$ref,z.$id,z.$db,e)}return z}function et(e,t,r,n){const o=Z.toUTF8(e.subarray(t,r));if(n)for(let n=0;n<o.length;n++)if(65533===o.charCodeAt(n)){if(!Ze(e,t,r))throw new k("Invalid UTF-8 string in BSON document");break}return o}const tt=/\x00/,rt=new Set(["$db","$ref","$id","$clusterTime"]);function nt(e,t,r,n){e[n++]=g,e[(n=n+Z.encodeUTF8Into(e,t,n)+1)-1]=0;const o=Z.encodeUTF8Into(e,r,n+4);return e[n+3]=o+1>>24&255,e[n+2]=o+1>>16&255,e[n+1]=o+1>>8&255,e[n]=o+1&255,n=n+4+o,e[n++]=0,n}const ot=new DataView(new ArrayBuffer(8),0,8),it=new Uint8Array(ot.buffer,0,4),st=new Uint8Array(ot.buffer,0,8);function ut(e,t,r,n){const o=!Object.is(r,-0)&&Number.isSafeInteger(r)&&r<=f&&r>=c?I:y;o===I?ot.setInt32(0,r,!0):ot.setFloat64(0,r,!0);const i=o===I?it:st;return e[n++]=o,n+=Z.encodeUTF8Into(e,t,n),e[n++]=0,e.set(i,n),n+i.byteLength}function at(e,t,r,n){return e[n++]=$,n+=Z.encodeUTF8Into(e,t,n),e[n++]=0,ot.setBigInt64(0,r,!0),e.set(st,n),n+st.byteLength}function ft(e,t,r,n){return e[n++]=x,n+=Z.encodeUTF8Into(e,t,n),e[n++]=0,n}function ct(e,t,r,n){return e[n++]=S,n+=Z.encodeUTF8Into(e,t,n),e[n++]=0,e[n++]=r?1:0,n}function lt(e,t,r,n){e[n++]=O,n+=Z.encodeUTF8Into(e,t,n),e[n++]=0;const o=le.fromNumber(r.getTime()),i=o.getLowBits(),s=o.getHighBits();return e[n++]=255&i,e[n++]=i>>8&255,e[n++]=i>>16&255,e[n++]=i>>24&255,e[n++]=255&s,e[n++]=s>>8&255,e[n++]=s>>16&255,e[n++]=s>>24&255,n}function ht(e,t,r,n){if(e[n++]=B,n+=Z.encodeUTF8Into(e,t,n),e[n++]=0,r.source&&null!=r.source.match(tt))throw new k("value "+r.source+" must not contain null bytes");return n+=Z.encodeUTF8Into(e,r.source,n),e[n++]=0,r.ignoreCase&&(e[n++]=105),r.global&&(e[n++]=115),r.multiline&&(e[n++]=109),e[n++]=0,n}function pt(e,t,r,n){if(e[n++]=B,n+=Z.encodeUTF8Into(e,t,n),e[n++]=0,null!=r.pattern.match(tt))throw new k("pattern "+r.pattern+" must not contain null bytes");n+=Z.encodeUTF8Into(e,r.pattern,n),e[n++]=0;const o=r.options.split("").sort().join("");return n+=Z.encodeUTF8Into(e,o,n),e[n++]=0,n}function dt(e,t,r,n){return null===r?e[n++]=x:"MinKey"===r._bsontype?e[n++]=L:e[n++]=P,n+=Z.encodeUTF8Into(e,t,n),e[n++]=0,n}function yt(e,t,r,n){if(e[n++]=_,n+=Z.encodeUTF8Into(e,t,n),e[n++]=0,!o(r.id))throw new k("object ["+JSON.stringify(r)+"] is not a valid ObjectId");return e.set(r.id.subarray(0,12),n),n+12}function gt(e,t,r,n){e[n++]=w,n+=Z.encodeUTF8Into(e,t,n),e[n++]=0;const o=r.length;return e[n++]=255&o,e[n++]=o>>8&255,e[n++]=o>>16&255,e[n++]=o>>24&255,e[n++]=R,e.set(r,n),n+o}function bt(e,t,r,n,o,i,s,u,a){if(a.has(r))throw new k("Cannot convert circular structure to BSON");a.add(r),e[n++]=Array.isArray(r)?m:b,n+=Z.encodeUTF8Into(e,t,n),e[n++]=0;const f=Nt(e,r,o,n,i+1,s,u,a);return a.delete(r),f}function mt(e,t,r,n){return e[n++]=A,n+=Z.encodeUTF8Into(e,t,n),e[n++]=0,e.set(r.bytes.subarray(0,16),n),n+16}function wt(e,t,r,n){e[n++]="Long"===r._bsontype?$:U,n+=Z.encodeUTF8Into(e,t,n),e[n++]=0;const o=r.getLowBits(),i=r.getHighBits();return e[n++]=255&o,e[n++]=o>>8&255,e[n++]=o>>16&255,e[n++]=o>>24&255,e[n++]=255&i,e[n++]=i>>8&255,e[n++]=i>>16&255,e[n++]=i>>24&255,n}function vt(e,t,r,n){return r=r.valueOf(),e[n++]=I,n+=Z.encodeUTF8Into(e,t,n),e[n++]=0,e[n++]=255&r,e[n++]=r>>8&255,e[n++]=r>>16&255,e[n++]=r>>24&255,n}function _t(e,t,r,n){return e[n++]=y,n+=Z.encodeUTF8Into(e,t,n),e[n++]=0,ot.setFloat64(0,r.value,!0),e.set(st,n),n+8}function St(e,t,r,n){e[n++]=N,n+=Z.encodeUTF8Into(e,t,n),e[n++]=0;const o=r.toString(),i=Z.encodeUTF8Into(e,o,n+4)+1;return e[n]=255&i,e[n+1]=i>>8&255,e[n+2]=i>>16&255,e[n+3]=i>>24&255,n=n+4+i-1,e[n++]=0,n}function Ot(e,t,r,n,o=!1,i=0,s=!1,u=!0,a){if(r.scope&&"object"==typeof r.scope){e[n++]=T,n+=Z.encodeUTF8Into(e,t,n),e[n++]=0;let f=n;const c=r.code;n+=4;const l=Z.encodeUTF8Into(e,c,n+4)+1;e[n]=255&l,e[n+1]=l>>8&255,e[n+2]=l>>16&255,e[n+3]=l>>24&255,e[n+4+l-1]=0,n=n+l+4;const h=Nt(e,r.scope,o,n,i+1,s,u,a);n=h-1;const p=h-f;e[f++]=255&p,e[f++]=p>>8&255,e[f++]=p>>16&255,e[f++]=p>>24&255,e[n++]=0}else{e[n++]=N,n+=Z.encodeUTF8Into(e,t,n),e[n++]=0;const o=r.code.toString(),i=Z.encodeUTF8Into(e,o,n+4)+1;e[n]=255&i,e[n+1]=i>>8&255,e[n+2]=i>>16&255,e[n+3]=i>>24&255,n=n+4+i-1,e[n++]=0}return n}function xt(e,t,r,n){e[n++]=w,n+=Z.encodeUTF8Into(e,t,n),e[n++]=0;const o=r.buffer;let i=r.position;return r.sub_type===W.SUBTYPE_BYTE_ARRAY&&(i+=4),e[n++]=255&i,e[n++]=i>>8&255,e[n++]=i>>16&255,e[n++]=i>>24&255,e[n++]=r.sub_type,r.sub_type===W.SUBTYPE_BYTE_ARRAY&&(i-=4,e[n++]=255&i,e[n++]=i>>8&255,e[n++]=i>>16&255,e[n++]=i>>24&255),e.set(o,n),n+r.position}function Bt(e,t,r,n){e[n++]=j,n+=Z.encodeUTF8Into(e,t,n),e[n++]=0;const o=Z.encodeUTF8Into(e,r.value,n+4)+1;return e[n]=255&o,e[n+1]=o>>8&255,e[n+2]=o>>16&255,e[n+3]=o>>24&255,n=n+4+o-1,e[n++]=0,n}function Et(e,t,r,n,o,i,s){e[n++]=b,n+=Z.encodeUTF8Into(e,t,n),e[n++]=0;let u=n,a={$ref:r.collection||r.namespace,$id:r.oid};null!=r.db&&(a.$db=r.db),a=Object.assign(a,r.fields);const f=Nt(e,a,!1,n,o+1,i,!0,s),c=f-u;return e[u++]=255&c,e[u++]=c>>8&255,e[u++]=c>>16&255,e[u++]=c>>24&255,f}function Nt(e,t,r,f,c,l,h,p){if(null==p){if(null==t)return e[0]=5,e[1]=0,e[2]=0,e[3]=0,e[4]=0,5;if(Array.isArray(t))throw new k("serialize does not support an array as the root input");if("object"!=typeof t)throw new k("serialize does not support non-object as the root input");if("_bsontype"in t&&"string"==typeof t._bsontype)throw new k("BSON types cannot be serialized as a document");if(u(t)||i(t)||o(t)||n(t))throw new k("date, regexp, typedarray, and arraybuffer cannot be BSON documents");p=new Set}p.add(t);let d=f+4;if(Array.isArray(t))for(let n=0;n<t.length;n++){const s=`${n}`;let f=t[n];if("function"==typeof f?.toBSON&&(f=f.toBSON()),"string"==typeof f)d=nt(e,s,f,d);else if("number"==typeof f)d=ut(e,s,f,d);else if("bigint"==typeof f)d=at(e,s,f,d);else if("boolean"==typeof f)d=ct(e,s,f,d);else if(f instanceof Date||u(f))d=lt(e,s,f,d);else if(void 0===f)d=ft(e,s,0,d);else if(null===f)d=ft(e,s,0,d);else if(o(f))d=gt(e,s,f,d);else if(f instanceof RegExp||i(f))d=ht(e,s,f,d);else if("object"==typeof f&&null==f._bsontype)d=bt(e,s,f,d,r,c,l,h,p);else{if("object"==typeof f&&f[Symbol.for("@@mdb.bson.version")]!==a)throw new F;if("ObjectId"===f._bsontype)d=yt(e,s,f,d);else if("Decimal128"===f._bsontype)d=mt(e,s,f,d);else if("Long"===f._bsontype||"Timestamp"===f._bsontype)d=wt(e,s,f,d);else if("Double"===f._bsontype)d=_t(e,s,f,d);else if("function"==typeof f&&l)d=St(e,s,f,d);else if("Code"===f._bsontype)d=Ot(e,s,f,d,r,c,l,h,p);else if("Binary"===f._bsontype)d=xt(e,s,f,d);else if("BSONSymbol"===f._bsontype)d=Bt(e,s,f,d);else if("DBRef"===f._bsontype)d=Et(e,s,f,d,c,l,p);else if("BSONRegExp"===f._bsontype)d=pt(e,s,f,d);else if("Int32"===f._bsontype)d=vt(e,s,f,d);else if("MinKey"===f._bsontype||"MaxKey"===f._bsontype)d=dt(e,s,f,d);else if(void 0!==f._bsontype)throw new k(`Unrecognized or invalid _bsontype: ${String(f._bsontype)}`)}}else if(t instanceof Map||s(t)){const n=t.entries();let s=!1;for(;!s;){const t=n.next();if(s=!!t.done,s)continue;const f=t.value[0];let y=t.value[1];"function"==typeof y?.toBSON&&(y=y.toBSON());const g=typeof y;if("string"==typeof f&&!rt.has(f)){if(null!=f.match(tt))throw new k("key "+f+" must not contain null bytes");if(r){if("$"===f[0])throw new k("key "+f+" must not start with '$'");if(~f.indexOf("."))throw new k("key "+f+" must not contain '.'")}}if("string"===g)d=nt(e,f,y,d);else if("number"===g)d=ut(e,f,y,d);else if("bigint"===g)d=at(e,f,y,d);else if("boolean"===g)d=ct(e,f,y,d);else if(y instanceof Date||u(y))d=lt(e,f,y,d);else if(null===y||void 0===y&&!1===h)d=ft(e,f,0,d);else if(o(y))d=gt(e,f,y,d);else if(y instanceof RegExp||i(y))d=ht(e,f,y,d);else if("object"===g&&null==y._bsontype)d=bt(e,f,y,d,r,c,l,h,p);else{if("object"==typeof y&&y[Symbol.for("@@mdb.bson.version")]!==a)throw new F;if("ObjectId"===y._bsontype)d=yt(e,f,y,d);else if("object"===g&&"Decimal128"===y._bsontype)d=mt(e,f,y,d);else if("Long"===y._bsontype||"Timestamp"===y._bsontype)d=wt(e,f,y,d);else if("Double"===y._bsontype)d=_t(e,f,y,d);else if("Code"===y._bsontype)d=Ot(e,f,y,d,r,c,l,h,p);else if("function"==typeof y&&l)d=St(e,f,y,d);else if("Binary"===y._bsontype)d=xt(e,f,y,d);else if("BSONSymbol"===y._bsontype)d=Bt(e,f,y,d);else if("DBRef"===y._bsontype)d=Et(e,f,y,d,c,l,p);else if("BSONRegExp"===y._bsontype)d=pt(e,f,y,d);else if("Int32"===y._bsontype)d=vt(e,f,y,d);else if("MinKey"===y._bsontype||"MaxKey"===y._bsontype)d=dt(e,f,y,d);else if(void 0!==y._bsontype)throw new k(`Unrecognized or invalid _bsontype: ${String(y._bsontype)}`)}}}else{if("function"==typeof t?.toBSON&&null!=(t=t.toBSON())&&"object"!=typeof t)throw new k("toBSON function did not return an object");for(const n of Object.keys(t)){let s=t[n];"function"==typeof s?.toBSON&&(s=s.toBSON());const f=typeof s;if("string"==typeof n&&!rt.has(n)){if(null!=n.match(tt))throw new k("key "+n+" must not contain null bytes");if(r){if("$"===n[0])throw new k("key "+n+" must not start with '$'");if(~n.indexOf("."))throw new k("key "+n+" must not contain '.'")}}if("string"===f)d=nt(e,n,s,d);else if("number"===f)d=ut(e,n,s,d);else if("bigint"===f)d=at(e,n,s,d);else if("boolean"===f)d=ct(e,n,s,d);else if(s instanceof Date||u(s))d=lt(e,n,s,d);else if(void 0===s)!1===h&&(d=ft(e,n,0,d));else if(null===s)d=ft(e,n,0,d);else if(o(s))d=gt(e,n,s,d);else if(s instanceof RegExp||i(s))d=ht(e,n,s,d);else if("object"===f&&null==s._bsontype)d=bt(e,n,s,d,r,c,l,h,p);else{if("object"==typeof s&&s[Symbol.for("@@mdb.bson.version")]!==a)throw new F;if("ObjectId"===s._bsontype)d=yt(e,n,s,d);else if("object"===f&&"Decimal128"===s._bsontype)d=mt(e,n,s,d);else if("Long"===s._bsontype||"Timestamp"===s._bsontype)d=wt(e,n,s,d);else if("Double"===s._bsontype)d=_t(e,n,s,d);else if("Code"===s._bsontype)d=Ot(e,n,s,d,r,c,l,h,p);else if("function"==typeof s&&l)d=St(e,n,s,d);else if("Binary"===s._bsontype)d=xt(e,n,s,d);else if("BSONSymbol"===s._bsontype)d=Bt(e,n,s,d);else if("DBRef"===s._bsontype)d=Et(e,n,s,d,c,l,p);else if("BSONRegExp"===s._bsontype)d=pt(e,n,s,d);else if("Int32"===s._bsontype)d=vt(e,n,s,d);else if("MinKey"===s._bsontype||"MaxKey"===s._bsontype)d=dt(e,n,s,d);else if(void 0!==s._bsontype)throw new k(`Unrecognized or invalid _bsontype: ${String(s._bsontype)}`)}}}p.delete(t),e[d++]=0;const y=d-f;return e[f++]=255&y,e[f++]=y>>8&255,e[f++]=y>>16&255,e[f++]=y>>24&255,d}const jt={$oid:$e,$binary:W,$uuid:W,$symbol:Re,$numberInt:Ee,$numberDecimal:xe,$numberDouble:Be,$numberLong:le,$minKey:je,$maxKey:Ne,$regex:Pe,$regularExpression:Pe,$timestamp:Me};function Tt(e,t={}){if("number"==typeof e){const r=e<=f&&e>=c,n=e<=l&&e>=h;if(t.relaxed||t.legacy)return e;if(Number.isInteger(e)&&!Object.is(e,-0)){if(r)return new Ee(e);if(n)return t.useBigInt64?BigInt(e):le.fromNumber(e)}return new Be(e)}if(null==e||"object"!=typeof e)return e;if(e.$undefined)return null;const r=Object.keys(e).filter((t=>t.startsWith("$")&&null!=e[t]));for(let n=0;n<r.length;n++){const o=jt[r[n]];if(o)return o.fromExtendedJSON(e,t)}if(null!=e.$date){const r=e.$date,n=new Date;if(t.legacy)if("number"==typeof r)n.setTime(r);else if("string"==typeof r)n.setTime(Date.parse(r));else{if("bigint"!=typeof r)throw new z("Unrecognized type for EJSON date: "+typeof r);n.setTime(Number(r))}else if("string"==typeof r)n.setTime(Date.parse(r));else if(le.isLong(r))n.setTime(r.toNumber());else if("number"==typeof r&&t.relaxed)n.setTime(r);else{if("bigint"!=typeof r)throw new z("Unrecognized type for EJSON date: "+typeof r);n.setTime(Number(r))}return n}if(null!=e.$code){const t=Object.assign({},e);return e.$scope&&(t.$scope=Tt(e.$scope)),te.fromExtendedJSON(e)}if(re(e)||e.$dbPointer){const t=e.$ref?e:e.$dbPointer;if(t instanceof ne)return t;const r=Object.keys(t).filter((e=>e.startsWith("$")));let n=!0;if(r.forEach((e=>{-1===["$ref","$id","$db"].indexOf(e)&&(n=!1)})),n)return ne.fromExtendedJSON(t)}return e}function It(e){const t=e.toISOString();return 0!==e.getUTCMilliseconds()?t:t.slice(0,-5)+"Z"}function Ut(e,t){if(e instanceof Map||s(e)){const r=Object.create(null);for(const[t,n]of e){if("string"!=typeof t)throw new k("Can only serialize maps with string keys");r[t]=n}return Ut(r,t)}if(("object"==typeof e||"function"==typeof e)&&null!==e){const r=t.seenObjects.findIndex((t=>t.obj===e));if(-1!==r){const e=t.seenObjects.map((e=>e.propertyName)),n=e.slice(0,r).map((e=>`${e} -> `)).join(""),o=e[r],i=" -> "+e.slice(r+1,e.length-1).map((e=>`${e} -> `)).join(""),s=e[e.length-1],u=" ".repeat(n.length+o.length/2),a="-".repeat(i.length+(o.length+s.length)/2-1);throw new k(`Converting circular structure to EJSON:\n    ${n}${o}${i}${s}\n    ${u}\\${a}/`)}t.seenObjects[t.seenObjects.length-1].obj=e}if(Array.isArray(e))return function(e,t){return e.map(((e,r)=>{t.seenObjects.push({propertyName:`index ${r}`,obj:null});try{return Ut(e,t)}finally{t.seenObjects.pop()}}))}(e,t);if(void 0===e)return null;if(e instanceof Date||u(e)){const r=e.getTime(),n=r>-1&&r<2534023188e5;return t.legacy?t.relaxed&&n?{$date:e.getTime()}:{$date:It(e)}:t.relaxed&&n?{$date:It(e)}:{$date:{$numberLong:e.getTime().toString()}}}if(!("number"!=typeof e||t.relaxed&&isFinite(e))){if(Number.isInteger(e)&&!Object.is(e,-0)){if(e>=c&&e<=f)return{$numberInt:e.toString()};if(e>=h&&e<=l)return{$numberLong:e.toString()}}return{$numberDouble:Object.is(e,-0)?"-0.0":e.toString()}}if("bigint"==typeof e)return t.relaxed?Number(BigInt.asIntN(64,e)):{$numberLong:BigInt.asIntN(64,e).toString()};if(e instanceof RegExp||i(e)){let r=e.flags;if(void 0===r){const t=e.toString().match(/[gimuy]*$/);t&&(r=t[0])}return new Pe(e.source,r).toExtendedJSON(t)}return null!=e&&"object"==typeof e?function(e,t){if(null==e||"object"!=typeof e)throw new k("not an object instance");const r=e._bsontype;if(void 0===r){const r={};for(const n of Object.keys(e)){t.seenObjects.push({propertyName:n,obj:null});try{const o=Ut(e[n],t);"__proto__"===n?Object.defineProperty(r,n,{value:o,writable:!0,enumerable:!0,configurable:!0}):r[n]=o}finally{t.seenObjects.pop()}}return r}if(null!=e&&"object"==typeof e&&"string"==typeof e._bsontype&&e[Symbol.for("@@mdb.bson.version")]!==a)throw new F;if(function(e){return null!=e&&"object"==typeof e&&"_bsontype"in e&&"string"==typeof e._bsontype}(e)){let n=e;if("function"!=typeof n.toExtendedJSON){const t=$t[e._bsontype];if(!t)throw new k("Unrecognized or invalid _bsontype: "+e._bsontype);n=t(n)}return"Code"===r&&n.scope?n=new te(n.code,Ut(n.scope,t)):"DBRef"===r&&n.oid&&(n=new ne(Ut(n.collection,t),Ut(n.oid,t),Ut(n.db,t),Ut(n.fields,t))),n.toExtendedJSON(t)}throw new k("_bsontype must be a string, but was: "+typeof r)}(e,t):e}const $t={Binary:e=>new W(e.value(),e.sub_type),Code:e=>new te(e.code,e.scope),DBRef:e=>new ne(e.collection||e.namespace,e.oid,e.db,e.fields),Decimal128:e=>new xe(e.bytes),Double:e=>new Be(e.value),Int32:e=>new Ee(e.value),Long:e=>le.fromBits(null!=e.low?e.low:e.low_,null!=e.low?e.high:e.high_,null!=e.low?e.unsigned:e.unsigned_),MaxKey:()=>new Ne,MinKey:()=>new je,ObjectId:e=>new $e(e),BSONRegExp:e=>new Pe(e.pattern,e.options),BSONSymbol:e=>new Re(e.value),Timestamp:e=>Me.fromBits(e.low,e.high)};function At(e,t){const r={useBigInt64:t?.useBigInt64??!1,relaxed:t?.relaxed??!0,legacy:t?.legacy??!1};return JSON.parse(e,((e,t)=>{if(-1!==e.indexOf("\0"))throw new k(`BSON Document field names cannot contain null bytes, found: ${JSON.stringify(e)}`);return Tt(t,r)}))}function Lt(e,t,r,n){null!=r&&"object"==typeof r&&(n=r,r=0),null==t||"object"!=typeof t||Array.isArray(t)||(n=t,t=void 0,r=0);const o=Ut(e,Object.assign({relaxed:!0,legacy:!1},n,{seenObjects:[{propertyName:"(root)",obj:null}]}));return JSON.stringify(o,t,r)}const Pt=Object.create(null);Pt.parse=At,Pt.stringify=Lt,Pt.serialize=function(e,t){return t=t||{},JSON.parse(Lt(e,t))},Pt.deserialize=function(e,t){return t=t||{},At(JSON.stringify(e),t)},Object.freeze(Pt);const Rt=17825792;let Dt=Z.allocate(Rt);function Mt(e){Dt.length<e&&(Dt=Z.allocate(e))}function kt(e,t={}){const r="boolean"==typeof t.checkKeys&&t.checkKeys,n="boolean"==typeof t.serializeFunctions&&t.serializeFunctions,o="boolean"!=typeof t.ignoreUndefined||t.ignoreUndefined,i="number"==typeof t.minInternalBufferSize?t.minInternalBufferSize:Rt;Dt.length<i&&(Dt=Z.allocate(i));const s=Nt(Dt,e,r,0,0,n,o,null),u=Z.allocate(s);return u.set(Dt.subarray(0,s),0),u}function Ft(e,t,r={}){const n="boolean"==typeof r.checkKeys&&r.checkKeys,o="boolean"==typeof r.serializeFunctions&&r.serializeFunctions,i="boolean"!=typeof r.ignoreUndefined||r.ignoreUndefined,s="number"==typeof r.index?r.index:0,u=Nt(Dt,e,n,0,0,o,i,null);return t.set(Dt.subarray(0,u),s),s+u-1}function zt(e,t={}){return We(Z.toLocalBufferType(e),t)}function Ct(e,t={}){return Ae(e,"boolean"==typeof(t=t||{}).serializeFunctions&&t.serializeFunctions,"boolean"!=typeof t.ignoreUndefined||t.ignoreUndefined)}function Ht(e,t,r,n,o,i){const s=Object.assign({allowObjectSmallerThanBufferSize:!0,index:0},i),u=Z.toLocalBufferType(e);let a=t;for(let e=0;e<r;e++){const t=u[a]|u[a+1]<<8|u[a+2]<<16|u[a+3]<<24;s.index=a,n[o+e]=We(u,s),a+=t}return a}var Vt=Object.freeze({__proto__:null,BSONError:k,BSONRegExp:Pe,BSONRuntimeError:z,BSONSymbol:Re,BSONType:M,BSONValue:G,BSONVersionError:F,Binary:W,Code:te,DBRef:ne,Decimal128:xe,Double:Be,EJSON:Pt,Int32:Ee,Long:le,MaxKey:Ne,MinKey:je,ObjectId:$e,Timestamp:Me,UUID:ee,calculateObjectSize:Ct,deserialize:zt,deserializeStream:Ht,serialize:kt,serializeWithBufferAndIndex:Ft,setInternalBufferSize:Mt});t.BSON=Vt,t.BSONError=k,t.BSONRegExp=Pe,t.BSONRuntimeError=z,t.BSONSymbol=Re,t.BSONType=M,t.BSONValue=G,t.BSONVersionError=F,t.Binary=W,t.Code=te,t.DBRef=ne,t.Decimal128=xe,t.Double=Be,t.EJSON=Pt,t.Int32=Ee,t.Long=le,t.MaxKey=Ne,t.MinKey=je,t.ObjectId=$e,t.Timestamp=Me,t.UUID=ee,t.calculateObjectSize=Ct,t.deserialize=zt,t.deserializeStream=Ht,t.serialize=kt,t.serializeWithBufferAndIndex=Ft,t.setInternalBufferSize=Mt}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,r),i.exports}r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r(26098)}();
//# sourceMappingURL=functions.js.map